<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/30d74baa196fe88a-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/static/blog/building-agents/agent.png"/><link rel="stylesheet" href="/_next/static/css/08396d768d17a060.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/1fbc182fae463ffb.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-522594b78a22df6b.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-9ba992a3e39e92be.js" async="" crossorigin=""></script><script src="/_next/static/chunks/69-11811877923592eb.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-f5c8d25c8479457f.js" async="" crossorigin=""></script><script src="/_next/static/chunks/9da6db1e-4c5ce4625bac7875.js" async=""></script><script src="/_next/static/chunks/258-d3b685a6269d0b54.js" async=""></script><script src="/_next/static/chunks/749-959f21c401b0dc65.js" async=""></script><script src="/_next/static/chunks/788-e0535f3072e73828.js" async=""></script><script src="/_next/static/chunks/app/layout-0db96909c3339c92.js" async=""></script><script src="/_next/static/chunks/341-80f30eef2fdea67d.js" async=""></script><script src="/_next/static/chunks/app/%5Bslug%5D/page-d5f06a52675594cd.js" async=""></script><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"/><title>Practical Guide on how to build an Agent from scratch with Gemini 3</title><meta name="description" content="A step-by-step practical guide on building AI agents using Gemini 3 Pro, covering tool integration, context management, and best practices for creating effective and reliable agents."/><meta name="author" content="Philipp Schmid"/><meta property="og:title" content="Practical Guide on how to build an Agent from scratch with Gemini 3"/><meta property="og:description" content="A step-by-step practical guide on building AI agents using Gemini 3 Pro, covering tool integration, context management, and best practices for creating effective and reliable agents."/><meta property="og:url" content="https://www.philschmid.de/building-agents"/><meta property="og:image" content="https://www.philschmid.de/static/blog/building-agents/thumbnail.jpg"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="Practical Guide on how to build an Agent from scratch with Gemini 3"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-11-21"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Practical Guide on how to build an Agent from scratch with Gemini 3"/><meta name="twitter:description" content="A step-by-step practical guide on building AI agents using Gemini 3 Pro, covering tool integration, context management, and best practices for creating effective and reliable agents."/><meta name="twitter:image" content="https://www.philschmid.de/static/blog/building-agents/thumbnail.jpg"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="256x256"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="min-h-screen bg-background font-sans antialiased __variable_f367f3 __variable_d4b326"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="relative flex min-h-dvh flex-col bg-background"><header class="z-10 sticky top-0 md:w-full backdrop-blur supports-[backdrop-filter]:bg-background/30 md:px-4"><div class="md:mx-auto max-w-screen-xl w-full flex justify-between px-2 md:px-0 py-4"><a class="flex gap-2 items-center hover:underline" href="/"><img alt="logo" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" style="color:transparent" srcSet="/_next/image?url=%2Fstatic%2Flogo.png&amp;w=32&amp;q=75 1x, /_next/image?url=%2Fstatic%2Flogo.png&amp;w=48&amp;q=75 2x" src="/_next/image?url=%2Fstatic%2Flogo.png&amp;w=48&amp;q=75"/><span class="font-medium tracking-wider uppercase">Philschmid</span></a><nav class="flex items-center space-x-4 lg:space-x-6"><div class="text-sm font-medium tracking-wider	uppercase cursor-pointer text-muted-foreground transition-colors hover:text-primary hidden sm:flex">Search<kbd class="ml-2 h-5 items-center gap-1 rounded bg-muted px-1.5 font-mono text-[10px] sm:flex"><span class="text-xs">⌘</span>k</kbd></div><a class="text-sm font-medium tracking-wider uppercase transition-colors hover:text-primary hidden sm:inline-block text-muted-foreground" href="/">Blog</a><a class="text-sm font-medium tracking-wider uppercase transition-colors hover:text-primary hidden sm:inline-block text-muted-foreground" href="/projects">Projects</a><a class="text-sm font-medium tracking-wider uppercase transition-colors hover:text-primary hidden sm:inline-block text-muted-foreground" href="/cloud-attention">Newsletter</a><a class="text-sm font-medium tracking-wider uppercase transition-colors hover:text-primary hidden sm:inline-block text-muted-foreground" href="/philipp-schmid">About Me</a></nav><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 py-2 w-10 px-0 sm:hidden" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rdla:" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg><span class="sr-only">Toggle Menu</span></button></div></header><main class="flex-1"><div><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","name":"Practical Guide on how to build an Agent from scratch with Gemini 3","headline":"Practical Guide on how to build an Agent from scratch with Gemini 3","author":{"@type":"Person","name":"Philipp Schmid"},"creator":{"@type":"Person","name":"Philipp Schmid"},"publisher":{"@type":"Organization","name":"Philipp Schmid","logo":{"@type":"ImageObject","url":"https://www.philschmid.de/api/og?title=Philipp Schmid"}},"identifier":"building-agents","url":"https://www.philschmid.de/building-agents","image":"https://www.philschmid.de/static/blog/building-agents/thumbnail.jpg","description":"A step-by-step practical guide on building AI agents using Gemini 3 Pro, covering tool integration, context management, and best practices for creating effective and reliable agents.","articleBody":"\nIt seems complicated, when you watch an AI agent edit multiple files, run commands, handle errors, and iteratively solve a problem, it feels like magic. But it isn’t. The secret to building an agent is that there is no secret.\n\nThe core of an Agent is surprisingly simple: It is a Large Language Model (LLM) running in a loop, equipped with tools it can choose to use.\n\nIf you can write a loop in Python, you can build an agent. This guide will walk you through the process, from a simple API call to a functioning CLI Agent.\n\n## What actually is an Agent?\n\nTraditional software workflows are prescriptive and follow predefined paths (`Step A -> Step B -> Step C`), **Agents** are System that uses an LLM to dynamically decide the control flow of an application to achieve a user goal.\n\nAn agent generally consists of these core components:\n\n1. **The Model (Brain):** The reasoning engine, in our case a Gemini model. It reasons through ambiguity, plans steps, and decides when it needs outside help.\n2. **Tools (Hands and Eyes):** Functions the agent can execute to interact with the outside world/environment (e.g., searching the web, reading a file, calling an API).\n3. **Context/Memory (Workspace):** The information the agent has access to at any moment. Managing this effectively, known as **Context Engineering**.\n4. **The Loop (Life):** A `while` loop that allows the model to: Observe → Think → Act → Observe again, until the task is complete.\n\n\n![agent](/static/blog/building-agents/agent.png)\n\n\n**\"The Loop\"** of nearly every agent is an iterative process:\n\n1. **Define Tool Definitions:** You describe your available tools (e.g., `get_weather`) to the model using a structured JSON format.\n2. **Call the LLM:** You send the user's prompt *and* the tool definitions to the model.\n3. **Model Decision:** The model analyzes the request. If a tool is needed, it returns a structured `tool use` containing the tool name and arguments.\n4. **Execute Tool (Client Responsibility):** The client/application code intercepts this `tool use`, executes the actual code or API call, and captures the result.\n5. **Respond and Iterate:** You send the result (the `tool response`) back to model. The model uses this new information to decide the next step, either calling another tool or generating the final response.\n\n## Building an Agent\n\nLet's build an agent step-by-step, progressing from basic text generation to a functional CLI agent using Gemini 3 Pro and Python SDK. \n\n_Prerequisites: Install the SDK (`pip install google-genai`) and set your `GEMINI_API_KEY` environment variable ([Get it in AI Studio](https://aistudio.google.com/app/apikey))._\n\n### Step 1: Basic Text Generation and Abstraction\n\nThe first step is to create a baseline interaction with the LLM, for us Gemini 3 Pro. We are going to create a simple Agent class abstraction to structure our code, which we will extend throughout this guide. We will first start with a simple chatbot that maintains a conversation history.\n\n```python\nfrom google import genai\nfrom google.genai import types\n\nclass Agent:\n    def __init__(self, model: str):\n        self.model = model\n        self.client = genai.Client()\n        self.contents = []\n\n    def run(self, contents: str):\n        self.contents.append({\"role\": \"user\", \"parts\": [{\"text\": contents}]})\n\n        response = self.client.models.generate_content(model=self.model, contents=self.contents)\n        self.contents.append(response.candidates[0].content)\n\n        return response\n\nagent = Agent(model=\"gemini-3-pro-preview\")\nresponse1 = agent.run(\n    contents=\"Hello, What are top 3 cities in Germany to visit? Only return the names of the cities.\"\n)\n\nprint(f\"Model: {response1.text}\")\n# Output: Berlin, Munich, Cologne \nresponse2 = agent.run(\n    contents=\"Tell me something about the second city.\"\n)\n\nprint(f\"Model: {response2.text}\")\n# Output: Munich is the capital of Bavaria and is known for its Oktoberfest.\n```\n\nThis is *not* an agent yet. It is a standard chatbot. It maintains state but cannot take action, has no \"hands or eyes\".\n\n\n### Step 2: Giving it Hands & Eyes (Tool Use)\n\nTo start turning this an agent, we need **Tool Use** or Function Calling. We provide the agent with tools. This requires defining the implementation (the Python code) and the definition (the schema the LLM sees). If the LLM believes that tool will help solve a user's prompt, it will return a structured request to call that function instead of just text. \n\nWe are going to create 3 tools, `read_file`, `write_file`, and `list_dir`. A tool Definition is a JSON schema that defines the `name`, `description`, and `parameters` of the tool.\n\n_**Best Practice**: Use the `description` fields to explain when and how to use the tool. The model relies heavily on these to understand when and how to use the tool. Be explicit and clear._\n\n```python\nimport os\nimport json\n\nread_file_definition = {\n    \"name\": \"read_file\",\n    \"description\": \"Reads a file and returns its contents.\",\n    \"parameters\": {\n        \"type\": \"object\",\n        \"properties\": {\n            \"file_path\": {\n                \"type\": \"string\",\n                \"description\": \"Path to the file to read.\",\n            }\n        },\n        \"required\": [\"file_path\"],\n    },\n}\n\nlist_dir_definition = {\n    \"name\": \"list_dir\",\n    \"description\": \"Lists the contents of a directory.\",\n    \"parameters\": {\n        \"type\": \"object\",\n        \"properties\": {\n            \"directory_path\": {\n                \"type\": \"string\",\n                \"description\": \"Path to the directory to list.\",\n            }\n        },\n        \"required\": [\"directory_path\"],\n    },\n}\n\nwrite_file_definition = {\n    \"name\": \"write_file\",\n    \"description\": \"Writes a file with the given contents.\",\n    \"parameters\": {\n        \"type\": \"object\",\n        \"properties\": {\n            \"file_path\": {\n                \"type\": \"string\",\n                \"description\": \"Path to the file to write.\",\n            },\n            \"contents\": {\n                \"type\": \"string\",\n                \"description\": \"Contents to write to the file.\",\n            },\n        },\n        \"required\": [\"file_path\", \"contents\"],\n    },\n}\n\ndef read_file(file_path: str) -> dict:\n    with open(file_path, \"r\") as f:\n        return f.read()\n\ndef write_file(file_path: str, contents: str) -> bool:\n    \"\"\"Writes a file with the given contents.\"\"\"\n    with open(file_path, \"w\") as f:\n        f.write(contents)\n    return True\n\ndef list_dir(directory_path: str) -> list[str]:\n    \"\"\"Lists the contents of a directory.\"\"\"\n    full_path = os.path.expanduser(directory_path)\n    return os.listdir(full_path)\n\nfile_tools = {\n    \"read_file\": {\"definition\": read_file_definition, \"function\": read_file},\n    \"write_file\": {\"definition\": write_file_definition, \"function\": write_file},\n    \"list_dir\": {\"definition\": list_dir_definition, \"function\": list_dir},\n}\n```\n\nNow we integrate the `tools` and function calls into our Agent class along side a System Instruction. System\n\n```python\nfrom google import genai\nfrom google.genai import types\n\nclass Agent:\n    def __init__(self, model: str,tools: list[dict]):\n        self.model = model\n        self.client = genai.Client()\n        self.contents = []\n        self.tools = tools\n\n    def run(self, contents: str):\n        self.contents.append({\"role\": \"user\", \"parts\": [{\"text\": contents}]})\n\n        config = types.GenerateContentConfig(\n            tools=[types.Tool(function_declarations=[tool[\"definition\"] for tool in self.tools.values()])],\n        )\n\n        response = self.client.models.generate_content(model=self.model, contents=self.contents, config=config)\n        self.contents.append(response.candidates[0].content)\n\n        return response\n\nagent = Agent(model=\"gemini-3-pro-preview\", tools=file_tools)\n\nresponse = agent.run(\n    contents=\"Can you list my files in the current directory?\"\n)\nprint(response.function_calls)\n# Output: [FunctionCall(name='list_dir', arguments={'directory_path': '.'})]\n```\n\nGreat! The model has successfully called the tool. Now, we need to add the tool execution logic to our Agent class and the loop return the result back to the model.\n\n## Step 3: Closing the Loop (The Agent)\n\nAn Agent isn't about generating one tool call, but about generating a series of tool calls, returning the results back to the model, and then generating another tool call, and so on until the task is completed.\n\nThe `Agent` class handles the core loop: intercepting the `FunctionCall`, executing the tool on the client side, and sending back the `FunctionResponse`. We also add a `SystemInstruction` to the model to guide the model on what to do.\n\n_Note: Gemini 3 uses [Thought signatures](https://ai.google.dev/gemini-api/docs/gemini-3?thinking=high#thought_signatures) to maintain reasoning context across API calls. You must return these signatures back to the model in your request exactly as they were received._\n\n```python\n# ... Code for the tools and tool definitions from Step 2 should be here ...\n\nfrom google import genai\nfrom google.genai import types\n\nclass Agent:\n    def __init__(self, model: str,tools: list[dict], system_instruction: str = \"You are a helpful assistant.\"):\n        self.model = model\n        self.client = genai.Client()\n        self.contents = []\n        self.tools = tools\n        self.system_instruction = system_instruction\n\n    def run(self, contents: str | list[dict[str, str]]):\n        if isinstance(contents, list):\n            self.contents.append({\"role\": \"user\", \"parts\": contents})\n        else:\n            self.contents.append({\"role\": \"user\", \"parts\": [{\"text\": contents}]})\n\n        config = types.GenerateContentConfig(\n            system_instruction=self.system_instruction,\n            tools=[types.Tool(function_declarations=[tool[\"definition\"] for tool in self.tools.values()])],\n        )\n\n        response = self.client.models.generate_content(model=self.model, contents=self.contents, config=config)\n        self.contents.append(response.candidates[0].content)\n\n        if response.function_calls:\n            functions_response_parts = []\n            for tool_call in response.function_calls:\n                print(f\"[Function Call] {tool_call}\")\n\n                if tool_call.name in self.tools:\n                    result = {\"result\": self.tools[tool_call.name][\"function\"](**tool_call.args)}\n                else:\n                    result = {\"error\": \"Tool not found\"}\n\n                print(f\"[Function Response] {result}\")\n                functions_response_parts.append({\"functionResponse\": {\"name\": tool_call.name, \"response\": result}})\n\n            return self.run(functions_response_parts)\n        \n        return response\n\nagent = Agent(\n    model=\"gemini-3-pro-preview\", \n    tools=file_tools, \n    system_instruction=\"You are a helpful Coding Assistant. Respond like you are Linus Torvalds.\"\n)\n\nresponse = agent.run(\n    contents=\"Can you list my files in the current directory?\"\n)\nprint(response.text)\n# Output: [Function Call] id=None args={'directory_path': '.'} name='list_dir'\n# [Function Response] {'result': ['.venv', ... ]}\n# There. Your current directory contains: `LICENSE`,\n```\n\nCongratulations. You just built your first functioning agent.\n\n## Phase 4: Multi-turn CLI Agent\n\nNow we can run our agent in a simple CLI loop. It takes surprisingly little code to create highly capable behavior.\n\n```python\n# ... Code for the Agent, tools and tool definitions from Step 3 should be here ...\n\nagent = Agent(\n    model=\"gemini-3-pro-preview\", \n    tools=file_tools, \n    system_instruction=\"You are a helpful Coding Assistant. Respond like you are Linus Torvalds.\"\n)\n\nprint(\"Agent ready. Ask it to check files in this directory.\")\nwhile True:\n    user_input = input(\"You: \")\n    if user_input.lower() in ['exit', 'quit']:\n        break\n\n    response = agent.run(user_input)\n    print(f\"Linus: {response.text}\\n\")\n```\n\n## Best Practices for Engineering Agents\n\nBuilding the loop is easy; making it reliable, transparent, and controllable is hard. Here are key engineering principles derived from top industry practices, grouped by functional area.\n\n### 1. Tool Definition & Ergonomics\nYour tools are the interface for the model. Don't just wrap your existing internal APIs. If a tool is confusing to a human, it's confusing to the model:\n\n*   **Clear Naming:** Use obvious names like `search_customer_database` rather than `cust_db_v2_query`.\n*   **Precise Descriptions:** Gemini reads the function docstrings to understand *when* and *how* to use a tool. Spend time writing these carefully, it is essentially \"prompt engineering\" for tools.\n*   **Return Meaningful Errors:** Don't return a 50-line Java stack trace. If a tool fails, return a clear string like `Error: File not found. Did you mean 'data.csv'?`. This allows the agent to self-correct.\n*   **Tolerate Fuzzy Inputs:** If a model frequently guesses file paths wrong, update your tool to handle relative paths or fuzzy inputs rather than just erroring out.\n\n### 2. Context Engineering\nModels have a finite \"attention budget.\" Managing what information enters the context is crucial for performance and cost.\n\n*   **Don't \"Dump\" Data:** Don't have a tool that returns an entire 10MB database table. Instead of `get_all_users()`, create `search_users(query: str)`.\n*   **Just-in-time Loading:** Instead of pre-loading all data (traditional RAG), use just-in-time strategies. The agent should maintain lightweight identifiers (file paths, IDs) and use tools to dynamically load content only when needed.\n*   **Compression:** For very long-running agents, summarize the history, remove old context or start a new sessions.\n*   **Agentic Memory:** Allow the agent to maintain notes or a scratchpad persisted *outside* the context window, pulling them back in only when relevant.\n\n### 3. Don't over engineer\n\nIt's tempting to build complex multi-agent systems. Don't.\n\n*   **Maximize a Single Agent First:** Don't immediately build complex multi-agent systems. Gemini is highly capable of handling dozens of tools in a single prompt.\n*   **Escape Hatches:** Ensure loops can be stopped like a `max_iterations` break (e.g., 15 turns).\n*   **Guardrails and System Instructions:** Use the `system_instruction` to guide the model with hard rules (e.g., \"You are strictly forbidden from offering refunds greater than $50\") or use external classifier.\n*   **Human-in-the-loop:** For sensitive actions (like `send_email` or `execute_code`), pause the loop and require user confirmation before the tool is actually executed.\n*   **Prioritize Transparency and Debugging:** Log tool calls and parameters. Analyzing the model's reasoning helps identify if issues, and improve the agent over time. \n\n## Conclusion\n\nBuilding an agent is no longer magic; it is a practical engineering task. As we've shown, you can build a working prototype in under 100 lines of code. While understanding these fundamentals is key, don't get bogged down re-engineering the same pattern over and over. The AI community has created fantastic open-source libraries that can help you build more complex and robust agents faster. \n\n--- \n\nThanks for reading! If you have any questions or feedback, please let me know on [Twitter](https://twitter.com/_philschmid) or [LinkedIn](https://www.linkedin.com/in/philipp-schmid-a6a2bb196/).","datePublished":"2025-11-21","dateModified":"2025-11-21","dateCreated":"2025-11-21"}</script><article class="lg:py-6 lg:mt-20 mt-10 mx-4 md:mx-auto max-w-7xl"><div class="prose dark:prose-invert max-w-5xl md:max-w-4xl text-left md:mx-auto px-4 "><h1 class="text-4xl font-light w-full font-serif">Practical Guide on how to build an Agent from scratch with Gemini 3</h1></div><div class="py-2 mx-auto xl:mx-0 xl:grid prose dark:prose-invert xl:grid-cols-[150px_1fr_250px] xl:py-10 xl:gap-20"><div class="flex xl:flex-col mx-auto gap-2 xl:gap-0 text-sm mt-[1.25rem]"><span> <!-- -->November 21, 2025</span><span>10<!-- --> minute read</span></div><div class="lg:w-[40em]"><p>It seems complicated, when you watch an AI agent edit multiple files, run commands, handle errors, and iteratively solve a problem, it feels like magic. But it isn’t. The secret to building an agent is that there is no secret.</p>
<p>The core of an Agent is surprisingly simple: It is a Large Language Model (LLM) running in a loop, equipped with tools it can choose to use.</p>
<p>If you can write a loop in Python, you can build an agent. This guide will walk you through the process, from a simple API call to a functioning CLI Agent.</p>
<h2 id="what-actually-is-an-agent"><a href="#what-actually-is-an-agent" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>What actually is an Agent?</h2>
<p>Traditional software workflows are prescriptive and follow predefined paths (<code>Step A -&gt; Step B -&gt; Step C</code>), <strong>Agents</strong> are System that uses an LLM to dynamically decide the control flow of an application to achieve a user goal.</p>
<p>An agent generally consists of these core components:</p>
<ol>
<li><strong>The Model (Brain):</strong> The reasoning engine, in our case a Gemini model. It reasons through ambiguity, plans steps, and decides when it needs outside help.</li>
<li><strong>Tools (Hands and Eyes):</strong> Functions the agent can execute to interact with the outside world/environment (e.g., searching the web, reading a file, calling an API).</li>
<li><strong>Context/Memory (Workspace):</strong> The information the agent has access to at any moment. Managing this effectively, known as <strong>Context Engineering</strong>.</li>
<li><strong>The Loop (Life):</strong> A <code>while</code> loop that allows the model to: Observe → Think → Act → Observe again, until the task is complete.</li>
</ol>
<p><img src="/static/blog/building-agents/agent.png" alt="agent"/></p>
<p><strong>&quot;The Loop&quot;</strong> of nearly every agent is an iterative process:</p>
<ol>
<li><strong>Define Tool Definitions:</strong> You describe your available tools (e.g., <code>get_weather</code>) to the model using a structured JSON format.</li>
<li><strong>Call the LLM:</strong> You send the user&#x27;s prompt <em>and</em> the tool definitions to the model.</li>
<li><strong>Model Decision:</strong> The model analyzes the request. If a tool is needed, it returns a structured <code>tool use</code> containing the tool name and arguments.</li>
<li><strong>Execute Tool (Client Responsibility):</strong> The client/application code intercepts this <code>tool use</code>, executes the actual code or API call, and captures the result.</li>
<li><strong>Respond and Iterate:</strong> You send the result (the <code>tool response</code>) back to model. The model uses this new information to decide the next step, either calling another tool or generating the final response.</li>
</ol>
<h2 id="building-an-agent"><a href="#building-an-agent" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Building an Agent</h2>
<p>Let&#x27;s build an agent step-by-step, progressing from basic text generation to a functional CLI agent using Gemini 3 Pro and Python SDK.</p>
<p><em>Prerequisites: Install the SDK (<code>pip install google-genai</code>) and set your <code>GEMINI_API_KEY</code> environment variable (<a target="_blank" rel="noopener noreferrer" href="https://aistudio.google.com/app/apikey">Get it in AI Studio</a>).</em></p>
<h3 id="step-1-basic-text-generation-and-abstraction"><a href="#step-1-basic-text-generation-and-abstraction" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 1: Basic Text Generation and Abstraction</h3>
<p>The first step is to create a baseline interaction with the LLM, for us Gemini 3 Pro. We are going to create a simple Agent class abstraction to structure our code, which we will extend throughout this guide. We will first start with a simple chatbot that maintains a conversation history.</p>
<figure data-rehype-pretty-code-figure=""><div class="relative  border-1 border-gray-900 dark:border rounded-lg m-0 "><button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3 duration-100 text-white absolute right-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3 h-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre class="m-0 bg-black text-xs"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> google </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> genai</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> google.genai </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> types</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">class</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> Agent</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    def</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> __init__</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(self, model: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.model </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> model</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.client </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> genai.Client()</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> []</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> run</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(self, contents: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents.append({</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;role&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;parts&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: [{</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;text&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: contents}]})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        response </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.client.models.generate_content(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">model</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.model, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">contents</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents)</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents.append(response.candidates[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">].content)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> response</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">agent </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> Agent(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">model</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;gemini-3-pro-preview&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">response1 </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> agent.run(</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    contents</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Hello, What are top 3 cities in Germany to visit? Only return the names of the cities.&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Model: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">response1.text</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D"># Output: Berlin, Munich, Cologne </span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">response2 </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> agent.run(</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    contents</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Tell me something about the second city.&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Model: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">response2.text</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D"># Output: Munich is the capital of Bavaria and is known for its Oktoberfest.</span></span></code></pre></div></figure>
<p>This is <em>not</em> an agent yet. It is a standard chatbot. It maintains state but cannot take action, has no &quot;hands or eyes&quot;.</p>
<h3 id="step-2-giving-it-hands--eyes-tool-use"><a href="#step-2-giving-it-hands--eyes-tool-use" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 2: Giving it Hands &amp; Eyes (Tool Use)</h3>
<p>To start turning this an agent, we need <strong>Tool Use</strong> or Function Calling. We provide the agent with tools. This requires defining the implementation (the Python code) and the definition (the schema the LLM sees). If the LLM believes that tool will help solve a user&#x27;s prompt, it will return a structured request to call that function instead of just text.</p>
<p>We are going to create 3 tools, <code>read_file</code>, <code>write_file</code>, and <code>list_dir</code>. A tool Definition is a JSON schema that defines the <code>name</code>, <code>description</code>, and <code>parameters</code> of the tool.</p>
<p><em><strong>Best Practice</strong>: Use the <code>description</code> fields to explain when and how to use the tool. The model relies heavily on these to understand when and how to use the tool. Be explicit and clear.</em></p>
<figure data-rehype-pretty-code-figure=""><div class="relative  border-1 border-gray-900 dark:border rounded-lg m-0 "><button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3 duration-100 text-white absolute right-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3 h-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre class="m-0 bg-black text-xs"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> os</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> json</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">read_file_definition </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;name&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;read_file&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;description&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Reads a file and returns its contents.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;parameters&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;object&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;properties&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">            &quot;file_path&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">                &quot;type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;string&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">                &quot;description&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Path to the file to read.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">            }</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        },</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;required&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: [</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;file_path&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">],</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    },</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">list_dir_definition </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;name&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;list_dir&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;description&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Lists the contents of a directory.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;parameters&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;object&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;properties&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">            &quot;directory_path&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">                &quot;type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;string&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">                &quot;description&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Path to the directory to list.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">            }</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        },</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;required&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: [</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;directory_path&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">],</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    },</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">write_file_definition </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;name&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;write_file&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;description&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Writes a file with the given contents.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;parameters&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;object&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;properties&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">            &quot;file_path&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">                &quot;type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;string&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">                &quot;description&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Path to the file to write.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">            },</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">            &quot;contents&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">                &quot;type&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;string&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">                &quot;description&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Contents to write to the file.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">            },</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        },</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">        &quot;required&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: [</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;file_path&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;contents&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">],</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    },</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> read_file</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(file_path: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    with</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> open</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(file_path, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;r&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">as</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> f:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> f.read()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> write_file</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(file_path: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, contents: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) -&gt; </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">bool</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;&quot;&quot;Writes a file with the given contents.&quot;&quot;&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    with</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> open</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(file_path, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;w&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">as</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> f:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        f.write(contents)</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> True</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> list_dir</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(directory_path: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">) -&gt; list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]:</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;&quot;&quot;Lists the contents of a directory.&quot;&quot;&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    full_path </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> os.path.expanduser(directory_path)</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> os.listdir(full_path)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">file_tools </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;read_file&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;definition&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: read_file_definition, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;function&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: read_file},</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;write_file&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;definition&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: write_file_definition, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;function&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: write_file},</span></span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">    &quot;list_dir&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;definition&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: list_dir_definition, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;function&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: list_dir},</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">}</span></span></code></pre></div></figure>
<p>Now we integrate the <code>tools</code> and function calls into our Agent class along side a System Instruction. System</p>
<figure data-rehype-pretty-code-figure=""><div class="relative  border-1 border-gray-900 dark:border rounded-lg m-0 "><button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3 duration-100 text-white absolute right-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3 h-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre class="m-0 bg-black text-xs"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> google </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> genai</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> google.genai </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> types</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">class</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> Agent</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    def</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> __init__</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(self, model: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,tools: list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]):</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.model </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> model</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.client </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> genai.Client()</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> []</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.tools </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> tools</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> run</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(self, contents: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents.append({</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;role&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;parts&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: [{</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;text&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: contents}]})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        config </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> types.GenerateContentConfig(</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">            tools</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">[types.Tool(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">function_declarations</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">[tool[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;definition&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> tool </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.tools.values()])],</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        )</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        response </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.client.models.generate_content(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">model</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.model, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">contents</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">config</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">config)</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents.append(response.candidates[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">].content)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> response</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">agent </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> Agent(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">model</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;gemini-3-pro-preview&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">tools</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">file_tools)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">response </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> agent.run(</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    contents</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Can you list my files in the current directory?&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(response.function_calls)</span></span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D"># Output: [FunctionCall(name=&#x27;list_dir&#x27;, arguments={&#x27;directory_path&#x27;: &#x27;.&#x27;})]</span></span></code></pre></div></figure>
<p>Great! The model has successfully called the tool. Now, we need to add the tool execution logic to our Agent class and the loop return the result back to the model.</p>
<h2 id="step-3-closing-the-loop-the-agent"><a href="#step-3-closing-the-loop-the-agent" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Step 3: Closing the Loop (The Agent)</h2>
<p>An Agent isn&#x27;t about generating one tool call, but about generating a series of tool calls, returning the results back to the model, and then generating another tool call, and so on until the task is completed.</p>
<p>The <code>Agent</code> class handles the core loop: intercepting the <code>FunctionCall</code>, executing the tool on the client side, and sending back the <code>FunctionResponse</code>. We also add a <code>SystemInstruction</code> to the model to guide the model on what to do.</p>
<p><em>Note: Gemini 3 uses <a target="_blank" rel="noopener noreferrer" href="https://ai.google.dev/gemini-api/docs/gemini-3?thinking=high#thought_signatures">Thought signatures</a> to maintain reasoning context across API calls. You must return these signatures back to the model in your request exactly as they were received.</em></p>
<figure data-rehype-pretty-code-figure=""><div class="relative  border-1 border-gray-900 dark:border rounded-lg m-0 "><button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3 duration-100 text-white absolute right-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3 h-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre class="m-0 bg-black text-xs"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D"># ... Code for the tools and tool definitions from Step 2 should be here ...</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> google </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> genai</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> google.genai </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> types</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">class</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> Agent</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    def</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> __init__</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(self, model: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,tools: list[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">dict</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">], system_instruction: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> =</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> &quot;You are a helpful assistant.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.model </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> model</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.client </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> genai.Client()</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> []</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.tools </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> tools</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.system_instruction </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> system_instruction</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> run</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(self, contents: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> |</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> list[dict[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]]):</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        if</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> isinstance</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(contents, </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">list</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">):</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">            self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents.append({</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;role&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;parts&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: contents})</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        else</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">            self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents.append({</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;role&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;user&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;parts&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: [{</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;text&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: contents}]})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        config </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> types.GenerateContentConfig(</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">            system_instruction</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.system_instruction,</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">            tools</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">[types.Tool(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">function_declarations</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">[tool[</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;definition&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">] </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> tool </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.tools.values()])],</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        )</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        response </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.client.models.generate_content(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">model</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.model, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">contents</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">config</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">config)</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">        self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.contents.append(response.candidates[</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">0</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">].content)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> response.function_calls:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">            functions_response_parts </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> []</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">            for</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> tool_call </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> response.function_calls:</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">                print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;[Function Call] </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">tool_call</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">                if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> tool_call.name </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.tools:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">                    result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;result&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.tools[tool_call.name][</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;function&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">](</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">**</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">tool_call.args)}</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">                else</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">                    result </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;error&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Tool not found&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">                print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;[Function Response] </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">result</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">                functions_response_parts.append({</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;functionResponse&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;name&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: tool_call.name, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;response&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: result}})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">            return</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> self</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">.run(functions_response_parts)</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">        </span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        return</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> response</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">agent </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> Agent(</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    model</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;gemini-3-pro-preview&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    tools</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">file_tools, </span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    system_instruction</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;You are a helpful Coding Assistant. Respond like you are Linus Torvalds.&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">response </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> agent.run(</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    contents</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Can you list my files in the current directory?&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(response.text)</span></span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D"># Output: [Function Call] id=None args={&#x27;directory_path&#x27;: &#x27;.&#x27;} name=&#x27;list_dir&#x27;</span></span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D"># [Function Response] {&#x27;result&#x27;: [&#x27;.venv&#x27;, ... ]}</span></span>
<span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D"># There. Your current directory contains: `LICENSE`,</span></span></code></pre></div></figure>
<p>Congratulations. You just built your first functioning agent.</p>
<h2 id="phase-4-multi-turn-cli-agent"><a href="#phase-4-multi-turn-cli-agent" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Phase 4: Multi-turn CLI Agent</h2>
<p>Now we can run our agent in a simple CLI loop. It takes surprisingly little code to create highly capable behavior.</p>
<figure data-rehype-pretty-code-figure=""><div class="relative  border-1 border-gray-900 dark:border rounded-lg m-0 "><button class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3 duration-100 text-white absolute right-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3 h-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button><pre class="m-0 bg-black text-xs"><code data-language="python" data-theme="github-dark github-light" style="display:grid"><span data-line=""><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D"># ... Code for the Agent, tools and tool definitions from Step 3 should be here ...</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">agent </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> Agent(</span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    model</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;gemini-3-pro-preview&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    tools</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">file_tools, </span></span>
<span data-line=""><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209">    system_instruction</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;You are a helpful Coding Assistant. Respond like you are Linus Torvalds.&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Agent ready. Ask it to check files in this directory.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">while</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> True</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">:</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    user_input </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> input</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;You: &quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">    if</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> user_input.lower() </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">in</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&#x27;exit&#x27;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&#x27;quit&#x27;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">]:</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">        break</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">    response </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> agent.run(user_input)</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">    print</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">f</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;Linus: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">{</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">response.text</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">}\n</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">)</span></span></code></pre></div></figure>
<h2 id="best-practices-for-engineering-agents"><a href="#best-practices-for-engineering-agents" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Best Practices for Engineering Agents</h2>
<p>Building the loop is easy; making it reliable, transparent, and controllable is hard. Here are key engineering principles derived from top industry practices, grouped by functional area.</p>
<h3 id="1-tool-definition--ergonomics"><a href="#1-tool-definition--ergonomics" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. Tool Definition &amp; Ergonomics</h3>
<p>Your tools are the interface for the model. Don&#x27;t just wrap your existing internal APIs. If a tool is confusing to a human, it&#x27;s confusing to the model:</p>
<ul>
<li><strong>Clear Naming:</strong> Use obvious names like <code>search_customer_database</code> rather than <code>cust_db_v2_query</code>.</li>
<li><strong>Precise Descriptions:</strong> Gemini reads the function docstrings to understand <em>when</em> and <em>how</em> to use a tool. Spend time writing these carefully, it is essentially &quot;prompt engineering&quot; for tools.</li>
<li><strong>Return Meaningful Errors:</strong> Don&#x27;t return a 50-line Java stack trace. If a tool fails, return a clear string like <code>Error: File not found. Did you mean &#x27;data.csv&#x27;?</code>. This allows the agent to self-correct.</li>
<li><strong>Tolerate Fuzzy Inputs:</strong> If a model frequently guesses file paths wrong, update your tool to handle relative paths or fuzzy inputs rather than just erroring out.</li>
</ul>
<h3 id="2-context-engineering"><a href="#2-context-engineering" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. Context Engineering</h3>
<p>Models have a finite &quot;attention budget.&quot; Managing what information enters the context is crucial for performance and cost.</p>
<ul>
<li><strong>Don&#x27;t &quot;Dump&quot; Data:</strong> Don&#x27;t have a tool that returns an entire 10MB database table. Instead of <code>get_all_users()</code>, create <code>search_users(query: str)</code>.</li>
<li><strong>Just-in-time Loading:</strong> Instead of pre-loading all data (traditional RAG), use just-in-time strategies. The agent should maintain lightweight identifiers (file paths, IDs) and use tools to dynamically load content only when needed.</li>
<li><strong>Compression:</strong> For very long-running agents, summarize the history, remove old context or start a new sessions.</li>
<li><strong>Agentic Memory:</strong> Allow the agent to maintain notes or a scratchpad persisted <em>outside</em> the context window, pulling them back in only when relevant.</li>
</ul>
<h3 id="3-dont-over-engineer"><a href="#3-dont-over-engineer" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3. Don&#x27;t over engineer</h3>
<p>It&#x27;s tempting to build complex multi-agent systems. Don&#x27;t.</p>
<ul>
<li><strong>Maximize a Single Agent First:</strong> Don&#x27;t immediately build complex multi-agent systems. Gemini is highly capable of handling dozens of tools in a single prompt.</li>
<li><strong>Escape Hatches:</strong> Ensure loops can be stopped like a <code>max_iterations</code> break (e.g., 15 turns).</li>
<li><strong>Guardrails and System Instructions:</strong> Use the <code>system_instruction</code> to guide the model with hard rules (e.g., &quot;You are strictly forbidden from offering refunds greater than $50&quot;) or use external classifier.</li>
<li><strong>Human-in-the-loop:</strong> For sensitive actions (like <code>send_email</code> or <code>execute_code</code>), pause the loop and require user confirmation before the tool is actually executed.</li>
<li><strong>Prioritize Transparency and Debugging:</strong> Log tool calls and parameters. Analyzing the model&#x27;s reasoning helps identify if issues, and improve the agent over time.</li>
</ul>
<h2 id="conclusion"><a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conclusion</h2>
<p>Building an agent is no longer magic; it is a practical engineering task. As we&#x27;ve shown, you can build a working prototype in under 100 lines of code. While understanding these fundamentals is key, don&#x27;t get bogged down re-engineering the same pattern over and over. The AI community has created fantastic open-source libraries that can help you build more complex and robust agents faster.</p>
<hr/>
<p>Thanks for reading! If you have any questions or feedback, please let me know on <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/_philschmid">Twitter</a> or <a target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/philipp-schmid-a6a2bb196/">LinkedIn</a>.</p></div><div class="hidden text-sm xl:block not-prose"><div class="sticky top-16 -mt-10 max-h-[calc(var(--vh)-4rem)] overflow-y-auto pt-10"></div></div></div></article></div></main><footer class="container flex flex-col gap-4  md:flex-row justify-between max-w-screen-xl my-4 w-full font-medium text-muted-foreground tracking-wider uppercase transition-colors"><div class="flex gap-4 items-start"><a class="hover:text-primary text-xs md:text-base" href="/philipp-schmid">Philipp Schmid<span> © <!-- -->2025</span></a><a class="hover:text-primary text-xs md:text-base" href="/imprint">Imprint</a><a class="hover:text-primary hidden md:block" href="/rss">RSS Feed</a><div class="hidden md:flex items-center tracking-wider uppercase gap-2 cursor-pointer hover:text-primary"><span>theme</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon h-4 w-4"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></div></div><div class="flex flex-col items-center justify-center"><div class="mb-3 flex gap-6"><a target="_blank" rel="noreferrer" href="mailto:schmidphilipp1995@gmail.com" class="hover:text-primary"><span class="sr-only">Mail</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail h-6 w-6"><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg></a><a target="_blank" rel="noreferrer" href="https://twitter.com/_philschmid" class="hover:text-primary"><span class="sr-only">Twitter</span><svg class="h-5 w-5" height="23" viewBox="0 0 1200 1227" width="23" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"></path></svg></a><a target="_blank" rel="noreferrer" href="https://www.linkedin.com/in/philipp-schmid-a6a2bb196/" class="hover:text-primary"><span class="sr-only">LinkedIn</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin h-6 w-6"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a target="_blank" rel="noreferrer" href="https://github.com/philschmid" class="hover:text-primary"><span class="sr-only">GitHub</span><svg viewBox="0 0 438.549 438.549" class="h-6 w-6"><path fill="currentColor" d="M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"></path></svg></a></div></div></footer></div><script src="/_next/static/chunks/webpack-522594b78a22df6b.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/30d74baa196fe88a-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/css/08396d768d17a060.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L4\"\n"])</script><script>self.__next_f.push([1,"5:HL[\"/_next/static/css/1fbc182fae463ffb.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"6:I[7690,[],\"\"]\n9:I[5613,[],\"\"]\nb:I[1778,[],\"\"]\nc:I[797,[\"878\",\"static/chunks/9da6db1e-4c5ce4625bac7875.js\",\"258\",\"static/chunks/258-d3b685a6269d0b54.js\",\"749\",\"static/chunks/749-959f21c401b0dc65.js\",\"788\",\"static/chunks/788-e0535f3072e73828.js\",\"185\",\"static/chunks/app/layout-0db96909c3339c92.js\"],\"PHProvider\"]\nd:I[2494,[\"878\",\"static/chunks/9da6db1e-4c5ce4625bac7875.js\",\"258\",\"static/chunks/258-d3b685a6269d0b54.js\",\"749\",\"static/chunks/749-959f21c401b0dc65.js\",\"788\",\"static/chunks/788-e0535f3072e73828.js\",\"185\",\"static/chunks/app/layout-0db96909c3339c92.js\"],\"ThemeProviders\"]\nf:I[5250,[\"258\",\"static/chunks/258-d3b685a6269d0b54.js\",\"749\",\"static/chunks/749-959f21c401b0dc65.js\",\"341\",\"static/chunks/341-80f30eef2fdea67d.js\",\"42\",\"static/chunks/app/%5Bslug%5D/page-d5f06a52675594cd.js\"],\"\"]\n10:I[6137,[\"878\",\"static/chunks/9da6db1e-4c5ce4625bac7875.js\",\"258\",\"static/chunks/258-d3b685a6269d0b54.js\",\"749\",\"static/chunks/749-959f21c401b0dc65.js\",\"788\",\"static/chunks/788-e0535f3072e73828.js\",\"185\",\"static/chunks/app/layout-0db96909c3339c92.js\"],\"\"]\n13:I[8955,[],\"\"]\na:[\"slug\",\"building-agents\",\"d\"]\n11:T843,"])</script><script>self.__next_f.push([1,"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8-33.598-19.607-70.277-29.408-110.063-29.408-39.781 0-76.472 9.804-110.063 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.854 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.419-1.996 2.475-2.282 3.711-5.14 3.711-8.562 0-.571-.049-5.708-.144-15.417a2549.81 2549.81 0 01-.144-25.406l-6.567 1.136c-4.187.767-9.469 1.092-15.846 1-6.374-.089-12.991-.757-19.842-1.999-6.854-1.231-13.229-4.086-19.13-8.559-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-.951-2.568-2.098-3.711-3.429-1.142-1.331-1.997-2.663-2.568-3.997-.572-1.335-.098-2.43 1.427-3.289 1.525-.859 4.281-1.276 8.28-1.276l5.708.853c3.807.763 8.516 3.042 14.133 6.851 5.614 3.806 10.229 8.754 13.846 14.842 4.38 7.806 9.657 13.754 15.846 17.847 6.184 4.093 12.419 6.136 18.699 6.136 6.28 0 11.704-.476 16.274-1.423 4.565-.952 8.848-2.383 12.847-4.285 1.713-12.758 6.377-22.559 13.988-29.41-10.848-1.14-20.601-2.857-29.264-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.979-3.901-12.374-5.852-26.648-5.852-42.826 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.379-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.283 18.794 7.952 23.84 10.994 5.046 3.041 9.089 5.618 12.135 7.708 17.705-4.947 35.976-7.421 54.818-7.421s37.117 2.474 54.823 7.421l10.849-6.849c7.419-4.57 16.18-8.758 26.262-12.565 10.088-3.805 17.802-4.853 23.134-3.138 8.562 21.509 9.325 40.922 2.279 58.24 15.036 16.18 22.559 35.787 22.559 58.817 0 16.178-1.958 30.497-5.853 42.966-3.9 12.471-8.941 22.457-15.125 29.979-6.191 7.521-13.901 13.85-23.131 18.986-9.232 5.14-18.182 8.85-26.84 11.136-8.662 2.286-18.415 4.004-29.263 5.146 9.894 8.562 14.842 22.077 14.842 40.539v60.237c0 3.422 1.19 6.279 3.572 8.562 2.379 2.279 6.136 2.95 11.276 1.995 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.161 41.825-81.126 41.825-128.906-.01-39.771-9.818-76.454-29.414-110.049z"])</script><script>self.__next_f.push([1,"14:[]\n"])</script><script>self.__next_f.push([1,"4:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/08396d768d17a060.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L6\",null,{\"buildId\":\"vjaPpfSRUzaqzmW2QAq_1\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/building-agents\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"building-agents\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"building-agents\\\"}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"building-agents\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L7\",\"$L8\",null]]},[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$a\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/1fbc182fae463ffb.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"body\",null,{\"className\":\"min-h-screen bg-background font-sans antialiased __variable_f367f3 __variable_d4b326\",\"children\":[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"relative flex min-h-dvh flex-col bg-background\",\"children\":[\"$Le\",[\"$\",\"main\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"section\",null,{\"className\":\"flex items-center flex-col justify-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex-1 my-12\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-5xl font-serif\",\"children\":\"404 - Page Not Found\"}]}],[\"$\",\"p\",null,{\"className\":\"mb-4 text-2xl\",\"children\":\"The page you are looking for does not exist.\"}]]}],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"footer\",null,{\"className\":\"container flex flex-col gap-4  md:flex-row justify-between max-w-screen-xl my-4 w-full font-medium text-muted-foreground tracking-wider uppercase transition-colors\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex gap-4 items-start\",\"children\":[[\"$\",\"$Lf\",null,{\"href\":\"/philipp-schmid\",\"className\":\"hover:text-primary text-xs md:text-base\",\"children\":[\"Philipp Schmid\",[\"$\",\"span\",null,{\"children\":[\" © \",2025]}]]}],[\"$\",\"$Lf\",null,{\"href\":\"/imprint\",\"className\":\"hover:text-primary text-xs md:text-base\",\"children\":\"Imprint\"}],[\"$\",\"$Lf\",null,{\"href\":\"/rss\",\"className\":\"hover:text-primary hidden md:block\",\"children\":\"RSS Feed\"}],[\"$\",\"$L10\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"flex flex-col items-center justify-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"mb-3 flex gap-6\",\"children\":[[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noreferrer\",\"href\":\"mailto:schmidphilipp1995@gmail.com\",\"className\":\"hover:text-primary\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"Mail\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-mail h-6 w-6\",\"children\":[[\"$\",\"rect\",\"18n3k1\",{\"width\":\"20\",\"height\":\"16\",\"x\":\"2\",\"y\":\"4\",\"rx\":\"2\"}],[\"$\",\"path\",\"1ocrg3\",{\"d\":\"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\"}],\"$undefined\"]}]]}],[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noreferrer\",\"href\":\"https://twitter.com/_philschmid\",\"className\":\"hover:text-primary\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"Twitter\"}],[\"$\",\"svg\",null,{\"className\":\"h-5 w-5\",\"height\":\"23\",\"viewBox\":\"0 0 1200 1227\",\"width\":\"23\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"children\":[\"$\",\"path\",null,{\"fill\":\"currentColor\",\"d\":\"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z\"}]}]]}],[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noreferrer\",\"href\":\"https://www.linkedin.com/in/philipp-schmid-a6a2bb196/\",\"className\":\"hover:text-primary\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"LinkedIn\"}],[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-linkedin h-6 w-6\",\"children\":[[\"$\",\"path\",\"c2jq9f\",{\"d\":\"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\"}],[\"$\",\"rect\",\"mk3on5\",{\"width\":\"4\",\"height\":\"12\",\"x\":\"2\",\"y\":\"9\"}],[\"$\",\"circle\",\"bt5ra8\",{\"cx\":\"4\",\"cy\":\"4\",\"r\":\"2\"}],\"$undefined\"]}]]}],[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noreferrer\",\"href\":\"https://github.com/philschmid\",\"className\":\"hover:text-primary\",\"children\":[[\"$\",\"span\",null,{\"className\":\"sr-only\",\"children\":\"GitHub\"}],[\"$\",\"svg\",null,{\"viewBox\":\"0 0 438.549 438.549\",\"className\":\"h-6 w-6\",\"children\":[\"$\",\"path\",null,{\"fill\":\"currentColor\",\"d\":\"$11\"}]}]]}]]}]}]]}]]}]}]}]}]}],null]],\"initialHead\":[false,\"$L12\"],\"globalErrorComponent\":\"$13\",\"missingSlots\":\"$W14\"}]]\n"])</script><script>self.__next_f.push([1,"17:I[1097,[\"258\",\"static/chunks/258-d3b685a6269d0b54.js\",\"749\",\"static/chunks/749-959f21c401b0dc65.js\",\"341\",\"static/chunks/341-80f30eef2fdea67d.js\",\"42\",\"static/chunks/app/%5Bslug%5D/page-d5f06a52675594cd.js\"],\"TableOfContents\"]\n18:I[1749,[\"258\",\"static/chunks/258-d3b685a6269d0b54.js\",\"749\",\"static/chunks/749-959f21c401b0dc65.js\",\"341\",\"static/chunks/341-80f30eef2fdea67d.js\",\"42\",\"static/chunks/app/%5Bslug%5D/page-d5f06a52675594cd.js\"],\"Image\"]\n19:I[6030,[\"878\",\"static/chunks/9da6db1e-4c5ce4625bac7875.js\",\"258\",\"static/chunks/258-d3b685a6269d0b54.js\",\"749\",\"static/chunks/749-959f21c401b0dc65.js\",\"788\",\"static/chunks/788-e0535f3072e73828.js\",\"185\",\"static/chunks/app/layout-0db96909c3339c92.js\"],\"MainNav\"]\n1a:I[9817,[\"878\",\"static/chunks/9da6db1e-4c5ce4625bac7875.js\",\"258\",\"static/chunks/258-d3b685a6269d0b54.js\",\"749\",\"static/chunks/749-959f21c401b0dc65.js\",\"788\",\"static/chunks/788-e0535f3072e73828.js\",\"185\",\"static/chunks/app/layout-0db96909c3339c92.js\"],\"MobileNav\"]\n15:T41a7,"])</script><script>self.__next_f.push([1,"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"name\":\"Practical Guide on how to build an Agent from scratch with Gemini 3\",\"headline\":\"Practical Guide on how to build an Agent from scratch with Gemini 3\",\"author\":{\"@type\":\"Person\",\"name\":\"Philipp Schmid\"},\"creator\":{\"@type\":\"Person\",\"name\":\"Philipp Schmid\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Philipp Schmid\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https://www.philschmid.de/api/og?title=Philipp Schmid\"}},\"identifier\":\"building-agents\",\"url\":\"https://www.philschmid.de/building-agents\",\"image\":\"https://www.philschmid.de/static/blog/building-agents/thumbnail.jpg\",\"description\":\"A step-by-step practical guide on building AI agents using Gemini 3 Pro, covering tool integration, context management, and best practices for creating effective and reliable agents.\",\"articleBody\":\"\\nIt seems complicated, when you watch an AI agent edit multiple files, run commands, handle errors, and iteratively solve a problem, it feels like magic. But it isn’t. The secret to building an agent is that there is no secret.\\n\\nThe core of an Agent is surprisingly simple: It is a Large Language Model (LLM) running in a loop, equipped with tools it can choose to use.\\n\\nIf you can write a loop in Python, you can build an agent. This guide will walk you through the process, from a simple API call to a functioning CLI Agent.\\n\\n## What actually is an Agent?\\n\\nTraditional software workflows are prescriptive and follow predefined paths (`Step A -\u003e Step B -\u003e Step C`), **Agents** are System that uses an LLM to dynamically decide the control flow of an application to achieve a user goal.\\n\\nAn agent generally consists of these core components:\\n\\n1. **The Model (Brain):** The reasoning engine, in our case a Gemini model. It reasons through ambiguity, plans steps, and decides when it needs outside help.\\n2. **Tools (Hands and Eyes):** Functions the agent can execute to interact with the outside world/environment (e.g., searching the web, reading a file, calling an API).\\n3. **Context/Memory (Workspace):** The information the agent has access to at any moment. Managing this effectively, known as **Context Engineering**.\\n4. **The Loop (Life):** A `while` loop that allows the model to: Observe → Think → Act → Observe again, until the task is complete.\\n\\n\\n![agent](/static/blog/building-agents/agent.png)\\n\\n\\n**\\\"The Loop\\\"** of nearly every agent is an iterative process:\\n\\n1. **Define Tool Definitions:** You describe your available tools (e.g., `get_weather`) to the model using a structured JSON format.\\n2. **Call the LLM:** You send the user's prompt *and* the tool definitions to the model.\\n3. **Model Decision:** The model analyzes the request. If a tool is needed, it returns a structured `tool use` containing the tool name and arguments.\\n4. **Execute Tool (Client Responsibility):** The client/application code intercepts this `tool use`, executes the actual code or API call, and captures the result.\\n5. **Respond and Iterate:** You send the result (the `tool response`) back to model. The model uses this new information to decide the next step, either calling another tool or generating the final response.\\n\\n## Building an Agent\\n\\nLet's build an agent step-by-step, progressing from basic text generation to a functional CLI agent using Gemini 3 Pro and Python SDK. \\n\\n_Prerequisites: Install the SDK (`pip install google-genai`) and set your `GEMINI_API_KEY` environment variable ([Get it in AI Studio](https://aistudio.google.com/app/apikey))._\\n\\n### Step 1: Basic Text Generation and Abstraction\\n\\nThe first step is to create a baseline interaction with the LLM, for us Gemini 3 Pro. We are going to create a simple Agent class abstraction to structure our code, which we will extend throughout this guide. We will first start with a simple chatbot that maintains a conversation history.\\n\\n```python\\nfrom google import genai\\nfrom google.genai import types\\n\\nclass Agent:\\n    def __init__(self, model: str):\\n        self.model = model\\n        self.client = genai.Client()\\n        self.contents = []\\n\\n    def run(self, contents: str):\\n        self.contents.append({\\\"role\\\": \\\"user\\\", \\\"parts\\\": [{\\\"text\\\": contents}]})\\n\\n        response = self.client.models.generate_content(model=self.model, contents=self.contents)\\n        self.contents.append(response.candidates[0].content)\\n\\n        return response\\n\\nagent = Agent(model=\\\"gemini-3-pro-preview\\\")\\nresponse1 = agent.run(\\n    contents=\\\"Hello, What are top 3 cities in Germany to visit? Only return the names of the cities.\\\"\\n)\\n\\nprint(f\\\"Model: {response1.text}\\\")\\n# Output: Berlin, Munich, Cologne \\nresponse2 = agent.run(\\n    contents=\\\"Tell me something about the second city.\\\"\\n)\\n\\nprint(f\\\"Model: {response2.text}\\\")\\n# Output: Munich is the capital of Bavaria and is known for its Oktoberfest.\\n```\\n\\nThis is *not* an agent yet. It is a standard chatbot. It maintains state but cannot take action, has no \\\"hands or eyes\\\".\\n\\n\\n### Step 2: Giving it Hands \u0026 Eyes (Tool Use)\\n\\nTo start turning this an agent, we need **Tool Use** or Function Calling. We provide the agent with tools. This requires defining the implementation (the Python code) and the definition (the schema the LLM sees). If the LLM believes that tool will help solve a user's prompt, it will return a structured request to call that function instead of just text. \\n\\nWe are going to create 3 tools, `read_file`, `write_file`, and `list_dir`. A tool Definition is a JSON schema that defines the `name`, `description`, and `parameters` of the tool.\\n\\n_**Best Practice**: Use the `description` fields to explain when and how to use the tool. The model relies heavily on these to understand when and how to use the tool. Be explicit and clear._\\n\\n```python\\nimport os\\nimport json\\n\\nread_file_definition = {\\n    \\\"name\\\": \\\"read_file\\\",\\n    \\\"description\\\": \\\"Reads a file and returns its contents.\\\",\\n    \\\"parameters\\\": {\\n        \\\"type\\\": \\\"object\\\",\\n        \\\"properties\\\": {\\n            \\\"file_path\\\": {\\n                \\\"type\\\": \\\"string\\\",\\n                \\\"description\\\": \\\"Path to the file to read.\\\",\\n            }\\n        },\\n        \\\"required\\\": [\\\"file_path\\\"],\\n    },\\n}\\n\\nlist_dir_definition = {\\n    \\\"name\\\": \\\"list_dir\\\",\\n    \\\"description\\\": \\\"Lists the contents of a directory.\\\",\\n    \\\"parameters\\\": {\\n        \\\"type\\\": \\\"object\\\",\\n        \\\"properties\\\": {\\n            \\\"directory_path\\\": {\\n                \\\"type\\\": \\\"string\\\",\\n                \\\"description\\\": \\\"Path to the directory to list.\\\",\\n            }\\n        },\\n        \\\"required\\\": [\\\"directory_path\\\"],\\n    },\\n}\\n\\nwrite_file_definition = {\\n    \\\"name\\\": \\\"write_file\\\",\\n    \\\"description\\\": \\\"Writes a file with the given contents.\\\",\\n    \\\"parameters\\\": {\\n        \\\"type\\\": \\\"object\\\",\\n        \\\"properties\\\": {\\n            \\\"file_path\\\": {\\n                \\\"type\\\": \\\"string\\\",\\n                \\\"description\\\": \\\"Path to the file to write.\\\",\\n            },\\n            \\\"contents\\\": {\\n                \\\"type\\\": \\\"string\\\",\\n                \\\"description\\\": \\\"Contents to write to the file.\\\",\\n            },\\n        },\\n        \\\"required\\\": [\\\"file_path\\\", \\\"contents\\\"],\\n    },\\n}\\n\\ndef read_file(file_path: str) -\u003e dict:\\n    with open(file_path, \\\"r\\\") as f:\\n        return f.read()\\n\\ndef write_file(file_path: str, contents: str) -\u003e bool:\\n    \\\"\\\"\\\"Writes a file with the given contents.\\\"\\\"\\\"\\n    with open(file_path, \\\"w\\\") as f:\\n        f.write(contents)\\n    return True\\n\\ndef list_dir(directory_path: str) -\u003e list[str]:\\n    \\\"\\\"\\\"Lists the contents of a directory.\\\"\\\"\\\"\\n    full_path = os.path.expanduser(directory_path)\\n    return os.listdir(full_path)\\n\\nfile_tools = {\\n    \\\"read_file\\\": {\\\"definition\\\": read_file_definition, \\\"function\\\": read_file},\\n    \\\"write_file\\\": {\\\"definition\\\": write_file_definition, \\\"function\\\": write_file},\\n    \\\"list_dir\\\": {\\\"definition\\\": list_dir_definition, \\\"function\\\": list_dir},\\n}\\n```\\n\\nNow we integrate the `tools` and function calls into our Agent class along side a System Instruction. System\\n\\n```python\\nfrom google import genai\\nfrom google.genai import types\\n\\nclass Agent:\\n    def __init__(self, model: str,tools: list[dict]):\\n        self.model = model\\n        self.client = genai.Client()\\n        self.contents = []\\n        self.tools = tools\\n\\n    def run(self, contents: str):\\n        self.contents.append({\\\"role\\\": \\\"user\\\", \\\"parts\\\": [{\\\"text\\\": contents}]})\\n\\n        config = types.GenerateContentConfig(\\n            tools=[types.Tool(function_declarations=[tool[\\\"definition\\\"] for tool in self.tools.values()])],\\n        )\\n\\n        response = self.client.models.generate_content(model=self.model, contents=self.contents, config=config)\\n        self.contents.append(response.candidates[0].content)\\n\\n        return response\\n\\nagent = Agent(model=\\\"gemini-3-pro-preview\\\", tools=file_tools)\\n\\nresponse = agent.run(\\n    contents=\\\"Can you list my files in the current directory?\\\"\\n)\\nprint(response.function_calls)\\n# Output: [FunctionCall(name='list_dir', arguments={'directory_path': '.'})]\\n```\\n\\nGreat! The model has successfully called the tool. Now, we need to add the tool execution logic to our Agent class and the loop return the result back to the model.\\n\\n## Step 3: Closing the Loop (The Agent)\\n\\nAn Agent isn't about generating one tool call, but about generating a series of tool calls, returning the results back to the model, and then generating another tool call, and so on until the task is completed.\\n\\nThe `Agent` class handles the core loop: intercepting the `FunctionCall`, executing the tool on the client side, and sending back the `FunctionResponse`. We also add a `SystemInstruction` to the model to guide the model on what to do.\\n\\n_Note: Gemini 3 uses [Thought signatures](https://ai.google.dev/gemini-api/docs/gemini-3?thinking=high#thought_signatures) to maintain reasoning context across API calls. You must return these signatures back to the model in your request exactly as they were received._\\n\\n```python\\n# ... Code for the tools and tool definitions from Step 2 should be here ...\\n\\nfrom google import genai\\nfrom google.genai import types\\n\\nclass Agent:\\n    def __init__(self, model: str,tools: list[dict], system_instruction: str = \\\"You are a helpful assistant.\\\"):\\n        self.model = model\\n        self.client = genai.Client()\\n        self.contents = []\\n        self.tools = tools\\n        self.system_instruction = system_instruction\\n\\n    def run(self, contents: str | list[dict[str, str]]):\\n        if isinstance(contents, list):\\n            self.contents.append({\\\"role\\\": \\\"user\\\", \\\"parts\\\": contents})\\n        else:\\n            self.contents.append({\\\"role\\\": \\\"user\\\", \\\"parts\\\": [{\\\"text\\\": contents}]})\\n\\n        config = types.GenerateContentConfig(\\n            system_instruction=self.system_instruction,\\n            tools=[types.Tool(function_declarations=[tool[\\\"definition\\\"] for tool in self.tools.values()])],\\n        )\\n\\n        response = self.client.models.generate_content(model=self.model, contents=self.contents, config=config)\\n        self.contents.append(response.candidates[0].content)\\n\\n        if response.function_calls:\\n            functions_response_parts = []\\n            for tool_call in response.function_calls:\\n                print(f\\\"[Function Call] {tool_call}\\\")\\n\\n                if tool_call.name in self.tools:\\n                    result = {\\\"result\\\": self.tools[tool_call.name][\\\"function\\\"](**tool_call.args)}\\n                else:\\n                    result = {\\\"error\\\": \\\"Tool not found\\\"}\\n\\n                print(f\\\"[Function Response] {result}\\\")\\n                functions_response_parts.append({\\\"functionResponse\\\": {\\\"name\\\": tool_call.name, \\\"response\\\": result}})\\n\\n            return self.run(functions_response_parts)\\n        \\n        return response\\n\\nagent = Agent(\\n    model=\\\"gemini-3-pro-preview\\\", \\n    tools=file_tools, \\n    system_instruction=\\\"You are a helpful Coding Assistant. Respond like you are Linus Torvalds.\\\"\\n)\\n\\nresponse = agent.run(\\n    contents=\\\"Can you list my files in the current directory?\\\"\\n)\\nprint(response.text)\\n# Output: [Function Call] id=None args={'directory_path': '.'} name='list_dir'\\n# [Function Response] {'result': ['.venv', ... ]}\\n# There. Your current directory contains: `LICENSE`,\\n```\\n\\nCongratulations. You just built your first functioning agent.\\n\\n## Phase 4: Multi-turn CLI Agent\\n\\nNow we can run our agent in a simple CLI loop. It takes surprisingly little code to create highly capable behavior.\\n\\n```python\\n# ... Code for the Agent, tools and tool definitions from Step 3 should be here ...\\n\\nagent = Agent(\\n    model=\\\"gemini-3-pro-preview\\\", \\n    tools=file_tools, \\n    system_instruction=\\\"You are a helpful Coding Assistant. Respond like you are Linus Torvalds.\\\"\\n)\\n\\nprint(\\\"Agent ready. Ask it to check files in this directory.\\\")\\nwhile True:\\n    user_input = input(\\\"You: \\\")\\n    if user_input.lower() in ['exit', 'quit']:\\n        break\\n\\n    response = agent.run(user_input)\\n    print(f\\\"Linus: {response.text}\\\\n\\\")\\n```\\n\\n## Best Practices for Engineering Agents\\n\\nBuilding the loop is easy; making it reliable, transparent, and controllable is hard. Here are key engineering principles derived from top industry practices, grouped by functional area.\\n\\n### 1. Tool Definition \u0026 Ergonomics\\nYour tools are the interface for the model. Don't just wrap your existing internal APIs. If a tool is confusing to a human, it's confusing to the model:\\n\\n*   **Clear Naming:** Use obvious names like `search_customer_database` rather than `cust_db_v2_query`.\\n*   **Precise Descriptions:** Gemini reads the function docstrings to understand *when* and *how* to use a tool. Spend time writing these carefully, it is essentially \\\"prompt engineering\\\" for tools.\\n*   **Return Meaningful Errors:** Don't return a 50-line Java stack trace. If a tool fails, return a clear string like `Error: File not found. Did you mean 'data.csv'?`. This allows the agent to self-correct.\\n*   **Tolerate Fuzzy Inputs:** If a model frequently guesses file paths wrong, update your tool to handle relative paths or fuzzy inputs rather than just erroring out.\\n\\n### 2. Context Engineering\\nModels have a finite \\\"attention budget.\\\" Managing what information enters the context is crucial for performance and cost.\\n\\n*   **Don't \\\"Dump\\\" Data:** Don't have a tool that returns an entire 10MB database table. Instead of `get_all_users()`, create `search_users(query: str)`.\\n*   **Just-in-time Loading:** Instead of pre-loading all data (traditional RAG), use just-in-time strategies. The agent should maintain lightweight identifiers (file paths, IDs) and use tools to dynamically load content only when needed.\\n*   **Compression:** For very long-running agents, summarize the history, remove old context or start a new sessions.\\n*   **Agentic Memory:** Allow the agent to maintain notes or a scratchpad persisted *outside* the context window, pulling them back in only when relevant.\\n\\n### 3. Don't over engineer\\n\\nIt's tempting to build complex multi-agent systems. Don't.\\n\\n*   **Maximize a Single Agent First:** Don't immediately build complex multi-agent systems. Gemini is highly capable of handling dozens of tools in a single prompt.\\n*   **Escape Hatches:** Ensure loops can be stopped like a `max_iterations` break (e.g., 15 turns).\\n*   **Guardrails and System Instructions:** Use the `system_instruction` to guide the model with hard rules (e.g., \\\"You are strictly forbidden from offering refunds greater than $50\\\") or use external classifier.\\n*   **Human-in-the-loop:** For sensitive actions (like `send_email` or `execute_code`), pause the loop and require user confirmation before the tool is actually executed.\\n*   **Prioritize Transparency and Debugging:** Log tool calls and parameters. Analyzing the model's reasoning helps identify if issues, and improve the agent over time. \\n\\n## Conclusion\\n\\nBuilding an agent is no longer magic; it is a practical engineering task. As we've shown, you can build a working prototype in under 100 lines of code. While understanding these fundamentals is key, don't get bogged down re-engineering the same pattern over and over. The AI community has created fantastic open-source libraries that can help you build more complex and robust agents faster. \\n\\n--- \\n\\nThanks for reading! If you have any questions or feedback, please let me know on [Twitter](https://twitter.com/_philschmid) or [LinkedIn](https://www.linkedin.com/in/philipp-schmid-a6a2bb196/).\",\"datePublished\":\"2025-11-21\",\"dateModified\":\"2025-11-21\",\"dateCreated\":\"2025-11-21\"}"])</script><script>self.__next_f.push([1,"8:[\"$\",\"div\",null,{\"children\":[[\"$\",\"script\",null,{\"suppressHydrationWarning\":true,\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"$15\"}}],[\"$\",\"article\",null,{\"className\":\"lg:py-6 lg:mt-20 mt-10 mx-4 md:mx-auto max-w-7xl\",\"children\":[[\"$\",\"div\",null,{\"className\":\"prose dark:prose-invert max-w-5xl md:max-w-4xl text-left md:mx-auto px-4 \",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-4xl font-light w-full font-serif\",\"children\":\"Practical Guide on how to build an Agent from scratch with Gemini 3\"}]}],[\"$\",\"div\",null,{\"className\":\"py-2 mx-auto xl:mx-0 xl:grid prose dark:prose-invert xl:grid-cols-[150px_1fr_250px] xl:py-10 xl:gap-20\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex xl:flex-col mx-auto gap-2 xl:gap-0 text-sm mt-[1.25rem]\",\"children\":[[\"$\",\"span\",null,{\"children\":[\" \",\"November 21, 2025\"]}],[\"$\",\"span\",null,{\"children\":[10,\" minute read\"]}],\"$undefined\"]}],[\"$\",\"div\",null,{\"className\":\"lg:w-[40em]\",\"children\":\"$L16\"}],[\"$\",\"div\",null,{\"className\":\"hidden text-sm xl:block not-prose\",\"children\":[\"$\",\"div\",null,{\"className\":\"sticky top-16 -mt-10 max-h-[calc(var(--vh)-4rem)] overflow-y-auto pt-10\",\"children\":[\"$\",\"$L17\",null,{\"toc\":{\"items\":[{\"url\":\"#what-actually-is-an-agent\",\"title\":\"What actually is an Agent?\"},{\"url\":\"#building-an-agent\",\"title\":\"Building an Agent\",\"items\":[{\"url\":\"#step-1-basic-text-generation-and-abstraction\",\"title\":\"Step 1: Basic Text Generation and Abstraction\"},{\"url\":\"#step-2-giving-it-hands--eyes-tool-use\",\"title\":\"Step 2: Giving it Hands \u0026 Eyes (Tool Use)\"}]},{\"url\":\"#step-3-closing-the-loop-the-agent\",\"title\":\"Step 3: Closing the Loop (The Agent)\"},{\"url\":\"#phase-4-multi-turn-cli-agent\",\"title\":\"Phase 4: Multi-turn CLI Agent\"},{\"url\":\"#best-practices-for-engineering-agents\",\"title\":\"Best Practices for Engineering Agents\",\"items\":[{\"url\":\"#1-tool-definition--ergonomics\",\"title\":\"1. Tool Definition \u0026 Ergonomics\"},{\"url\":\"#2-context-engineering\",\"title\":\"2. Context Engineering\"},{\"url\":\"#3-dont-over-engineer\",\"title\":\"3. Don't over engineer\"}]},{\"url\":\"#conclusion\",\"title\":\"Conclusion\"}]}}]}]}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"e:[\"$\",\"header\",null,{\"className\":\"z-10 sticky top-0 md:w-full backdrop-blur supports-[backdrop-filter]:bg-background/30 md:px-4\",\"children\":[\"$\",\"div\",null,{\"className\":\"md:mx-auto max-w-screen-xl w-full flex justify-between px-2 md:px-0 py-4\",\"children\":[[\"$\",\"$Lf\",null,{\"href\":\"/\",\"className\":\"flex gap-2 items-center hover:underline\",\"children\":[[\"$\",\"$L18\",null,{\"src\":\"/static/logo.png\",\"alt\":\"logo\",\"width\":24,\"height\":24}],[\"$\",\"span\",null,{\"className\":\"font-medium tracking-wider uppercase\",\"children\":\"Philschmid\"}]]}],[\"$\",\"$L19\",null,{\"posts\":[{\"frontmatter\":{\"title\":\"Practical Guide on how to build an Agent from scratch with Gemini 3\"},\"slug\":\"building-agents\"},{\"frontmatter\":{\"title\":\"Gemini 3 Prompting: Best Practices for General Usage\"},\"slug\":\"gemini-3-prompt-practices\"},{\"frontmatter\":{\"title\":\"Gemini API File Search: A Web Developer Tutorial\"},\"slug\":\"gemini-file-search-javascript\"},{\"frontmatter\":{\"title\":\"Build your first AI Agent with Gemini, n8n and Google Cloud Run\"},\"slug\":\"n8n-cloud-run-gemini\"},{\"frontmatter\":{\"title\":\"AI Agent Benchmark Compendium\"},\"slug\":\"benchmark-compedium\"},{\"frontmatter\":{\"title\":\"Agents 2.0: From Shallow Loops to Deep Agents\"},\"slug\":\"agents-2.0-deep-agents\"},{\"frontmatter\":{\"title\":\"The Rise of Subagents\"},\"slug\":\"the-rise-of-subagents\"},{\"frontmatter\":{\"title\":\"The 10 Steps for product AI generation with Gemini 2.5 Flash\"},\"slug\":\"gemini-image-generation-product\"},{\"frontmatter\":{\"title\":\"Memory in Agents, Make LLMs remember.\"},\"slug\":\"memory-in-agents\"},{\"frontmatter\":{\"title\":\"Google Gemini CLI Cheatsheet\"},\"slug\":\"gemini-cli-cheatsheet\"},{\"frontmatter\":{\"title\":\"Code Sandbox MCP: A Simple Code Interpreter for Your AI Agents\"},\"slug\":\"code-sandbox-mcp\"},{\"frontmatter\":{\"title\":\"Integrating Long-Term Memory with Gemini 2.5\"},\"slug\":\"gemini-with-memory\"},{\"frontmatter\":{\"title\":\"The New Skill in AI is Not Prompting, It's Context Engineering\"},\"slug\":\"context-engineering\"},{\"frontmatter\":{\"title\":\"Single vs Multi-Agent System?\"},\"slug\":\"single-vs-multi-agents\"},{\"frontmatter\":{\"title\":\"Zero to One: Learning Agentic Patterns\"},\"slug\":\"agentic-pattern\"},{\"frontmatter\":{\"title\":\"Google Gemini LangChain Cheatsheet\"},\"slug\":\"gemini-langchain-cheatsheet\"},{\"frontmatter\":{\"title\":\"OpenAI Codex CLI, how does it work?\"},\"slug\":\"openai-codex-cli\"},{\"frontmatter\":{\"title\":\"Model Context Protocol (MCP) an overview\"},\"slug\":\"mcp-introduction\"},{\"frontmatter\":{\"title\":\"ReAct agent from scratch with Gemini 2.5 and LangGraph\"},\"slug\":\"langgraph-gemini-2-5-react-agent\"},{\"frontmatter\":{\"title\":\"Pass@k vs Pass^k: Understanding Agent Reliability\"},\"slug\":\"agents-pass-at-k-pass-power-k\"},{\"frontmatter\":{\"title\":\"Google Gemma 3 Function Calling Example\"},\"slug\":\"gemma-function-calling\"},{\"frontmatter\":{\"title\":\"Function Calling Guide: Google DeepMind Gemini 2.0 Flash\"},\"slug\":\"gemini-function-calling\"},{\"frontmatter\":{\"title\":\"From PDFs to Insights: Structured Outputs from PDFs with Gemini 2.0\"},\"slug\":\"gemini-pdf-to-data\"},{\"frontmatter\":{\"title\":\"Mini-R1: Reproduce Deepseek R1 „aha moment“ a RL tutorial\"},\"slug\":\"mini-deepseek-r1\"},{\"frontmatter\":{\"title\":\"How to align open LLMs in 2025 with DPO \u0026 and synthetic data\"},\"slug\":\"rl-with-llms-in-2025-dpo\"},{\"frontmatter\":{\"title\":\"Bite: How Deepseek R1 was trained\"},\"slug\":\"deepseek-r1\"},{\"frontmatter\":{\"title\":\"How to use Anthropic MCP Server with open LLMs, OpenAI or Google Gemini\"},\"slug\":\"mcp-example-llama\"},{\"frontmatter\":{\"title\":\"Fine-tune classifier with ModernBERT in 2025\"},\"slug\":\"fine-tune-modern-bert-in-2025\"},{\"frontmatter\":{\"title\":\"How to fine-tune open LLMs in 2025 with Hugging Face\"},\"slug\":\"fine-tune-llms-in-2025\"},{\"frontmatter\":{\"title\":\"Deploy QwQ-32B-Preview the best open Reasoning Model on AWS with Hugging Face\"},\"slug\":\"sagemaker-deploy-qwq\"},{\"frontmatter\":{\"title\":\"Deploy Llama 3.2 Vision on Amazon SageMaker\"},\"slug\":\"sagemaker-llama32-vision\"},{\"frontmatter\":{\"title\":\"How to Fine-Tune Multimodal Models or VLMs with Hugging Face TRL\"},\"slug\":\"fine-tune-multimodal-llms-with-trl\"},{\"frontmatter\":{\"title\":\"Evaluate open LLMs with Vertex AI and Gemini\"},\"slug\":\"evaluate-llm-with-gemini\"},{\"frontmatter\":{\"title\":\"Evaluate LLMs using Evaluation Harness and Hugging Face TGI/vLLM\"},\"slug\":\"evaluate-llms-with-lm-eval-and-tgi-vllm\"},{\"frontmatter\":{\"title\":\"Deploy open LLMs with Terraform and Amazon SageMaker\"},\"slug\":\"terraform-llm-sagemaker\"},{\"frontmatter\":{\"title\":\"LLM Evaluation doesn't need to be complicated\"},\"slug\":\"llm-evaluation\"},{\"frontmatter\":{\"title\":\"Evaluating Open LLMs with MixEval: The Closest Benchmark to LMSYS Chatbot Arena\"},\"slug\":\"evaluate-llm-mixeval\"},{\"frontmatter\":{\"title\":\"Train and Deploy open Embedding Models on Amazon SageMaker\"},\"slug\":\"sagemaker-train-deploy-embedding-models\"},{\"frontmatter\":{\"title\":\"Deploy Mixtral 8x7B on AWS Inferentia2 with Hugging Face Optimum\"},\"slug\":\"inferentia2-mixtral-8x7b\"},{\"frontmatter\":{\"title\":\"Fine-tune Llama 3 with PyTorch FSDP and Q-Lora on Amazon SageMaker\"},\"slug\":\"sagemaker-train-deploy-llama3\"},{\"frontmatter\":{\"title\":\"Fine-tune Embedding models for Retrieval Augmented Generation (RAG)\"},\"slug\":\"fine-tune-embedding-model-for-rag\"},{\"frontmatter\":{\"title\":\"Understanding the Cost of Generative AI Models in Production\"},\"slug\":\"cost-generative-ai\"},{\"frontmatter\":{\"title\":\"Deploy Llama 3 70B on AWS Inferentia2 with Hugging Face Optimum\"},\"slug\":\"inferentia2-llama3-70b\"},{\"frontmatter\":{\"title\":\"Deploy open LLMs with vLLM on Hugging Face Inference Endpoints\"},\"slug\":\"vllm-inference-endpoints\"},{\"frontmatter\":{\"title\":\"Efficiently fine-tune Llama 3 with PyTorch FSDP and Q-Lora\"},\"slug\":\"fsdp-qlora-llama3\"},{\"frontmatter\":{\"title\":\"Deploy Llama 3 on Amazon SageMaker\"},\"slug\":\"sagemaker-llama3\"},{\"frontmatter\":{\"title\":\"Accelerate Mixtral 8x7B with Speculative Decoding and Quantization on Amazon SageMaker\"},\"slug\":\"sagemaker-awq-medusa\"},{\"frontmatter\":{\"title\":\"Deploy Llama 2 70B on AWS Inferentia2 with Hugging Face Optimum\"},\"slug\":\"inferentia2-llama-70b-inference\"},{\"frontmatter\":{\"title\":\"Fine-Tune \u0026 Evaluate LLMs in 2024 with Amazon SageMaker\"},\"slug\":\"sagemaker-train-evalaute-llms-2024\"},{\"frontmatter\":{\"title\":\"Evaluate LLMs with Hugging Face Lighteval on Amazon SageMaker\"},\"slug\":\"sagemaker-evaluate-llm-lighteval\"},{\"frontmatter\":{\"title\":\"How to fine-tune Google Gemma with ChatML and Hugging Face TRL\"},\"slug\":\"fine-tune-google-gemma\"},{\"frontmatter\":{\"title\":\"RLHF in 2024 with DPO \u0026 Hugging Face\"},\"slug\":\"dpo-align-llms-in-2024-with-trl\"},{\"frontmatter\":{\"title\":\"How to Fine-Tune LLMs in 2024 with Hugging Face\"},\"slug\":\"fine-tune-llms-in-2024-with-trl\"},{\"frontmatter\":{\"title\":\"Scale LLM Inference on Amazon SageMaker with Multi-Replica Endpoints\"},\"slug\":\"sagemaker-multi-replica\"},{\"frontmatter\":{\"title\":\"Fine-tune Llama 7B on AWS Trainium \"},\"slug\":\"fine-tune-llama-7b-trainium\"},{\"frontmatter\":{\"title\":\"Programmatically manage 🤗 Inference Endpoints\"},\"slug\":\"inference-endpoints-iac\"},{\"frontmatter\":{\"title\":\"Deploy Mixtral 8x7B on Amazon SageMaker\"},\"slug\":\"sagemaker-deploy-mixtral\"},{\"frontmatter\":{\"title\":\"Deploy Embedding Models on AWS inferentia2 with Amazon SageMaker\"},\"slug\":\"inferentia2-embeddings\"},{\"frontmatter\":{\"title\":\"Deploy Llama 2 7B on AWS inferentia2 with Amazon SageMaker\"},\"slug\":\"inferentia2-llama-7b\"},{\"frontmatter\":{\"title\":\"Deploy Stable Diffusion XL on AWS inferentia2 with Amazon SageMaker\"},\"slug\":\"inferentia2-stable-diffusion-xl\"},{\"frontmatter\":{\"title\":\"Amazon Bedrock: How good (bad) is Titan Embeddings? \"},\"slug\":\"amazon-titan-embeddings\"},{\"frontmatter\":{\"title\":\"Evaluate LLMs and RAG a practical example using Langchain and Hugging Face\"},\"slug\":\"evaluate-llm\"},{\"frontmatter\":{\"title\":\"Deploy Idefics 9B \u0026 80B on Amazon SageMaker\"},\"slug\":\"sagemaker-idefics\"},{\"frontmatter\":{\"title\":\"Train and Deploy Mistral 7B with Hugging Face on Amazon SageMaker\"},\"slug\":\"sagemaker-mistral\"},{\"frontmatter\":{\"title\":\"Llama 2 on Amazon SageMaker a Benchmark\"},\"slug\":\"sagemaker-llama-benchmark\"},{\"frontmatter\":{\"title\":\"Fine-tune Falcon 180B with DeepSpeed ZeRO, LoRA \u0026 Flash Attention\"},\"slug\":\"deepspeed-lora-flash-attention\"},{\"frontmatter\":{\"title\":\"Fine-tune Falcon 180B with QLoRA and Flash Attention on Amazon SageMaker\"},\"slug\":\"sagemaker-falcon-180b-qlora\"},{\"frontmatter\":{\"title\":\"Deploy Falcon 180B on Amazon SageMaker\"},\"slug\":\"sagemaker-falcon-180b\"},{\"frontmatter\":{\"title\":\"Optimize open LLMs using GPTQ and Hugging Face Optimum\"},\"slug\":\"gptq-llama\"},{\"frontmatter\":{\"title\":\"LLMOps: Deploy Open LLMs using Infrastructure as Code with AWS CDK\"},\"slug\":\"cdk-llama2\"},{\"frontmatter\":{\"title\":\"Deploy Llama 2 7B/13B/70B on Amazon SageMaker\"},\"slug\":\"sagemaker-llama-llm\"},{\"frontmatter\":{\"title\":\"Introducing EasyLLM - streamline open LLMs\"},\"slug\":\"introducing-easyllm\"},{\"frontmatter\":{\"title\":\"Extended Guide: Instruction-tune Llama 2\"},\"slug\":\"instruction-tune-llama-2\"},{\"frontmatter\":{\"title\":\"LLaMA 2 - Every Resource you need\"},\"slug\":\"llama-2\"},{\"frontmatter\":{\"title\":\"Fine-tune LLaMA 2 (7-70B) on Amazon SageMaker\"},\"slug\":\"sagemaker-llama2-qlora\"},{\"frontmatter\":{\"title\":\"Train LLMs using QLoRA on Amazon SageMaker\"},\"slug\":\"sagemaker-falcon-qlora\"},{\"frontmatter\":{\"title\":\"Deploy LLMs with Hugging Face Inference Endpoints\"},\"slug\":\"endpoints-llm\"},{\"frontmatter\":{\"title\":\"Optimize \u0026 Deploy BERT on AWS inferentia2\"},\"slug\":\"optimize-deploy-bert-inf2\"},{\"frontmatter\":{\"title\":\"Securely deploy LLMs inside VPCs with Hugging Face and Amazon SageMaker\"},\"slug\":\"sagemaker-llm-vpc\"},{\"frontmatter\":{\"title\":\"Deploy Falcon 7B \u0026 40B on Amazon SageMaker\"},\"slug\":\"sagemaker-falcon-llm\"},{\"frontmatter\":{\"title\":\"Fine-tune BERT for Text Classification on AWS Trainium\"},\"slug\":\"getting-started-trainium\"},{\"frontmatter\":{\"title\":\"Introducing the Hugging Face LLM Inference Container for Amazon SageMaker\"},\"slug\":\"sagemaker-huggingface-llm\"},{\"frontmatter\":{\"title\":\"Generative AI for Document Understanding with Hugging Face and Amazon SageMaker\"},\"slug\":\"sagemaker-donut\"},{\"frontmatter\":{\"title\":\"How to scale LLM workloads to 20B+ with Amazon SageMaker using Hugging Face and PyTorch FSDP\"},\"slug\":\"sagemaker-fsdp-gpt\"},{\"frontmatter\":{\"title\":\"Setting up AWS Trainium for Hugging Face Transformers\"},\"slug\":\"setup-aws-trainium\"},{\"frontmatter\":{\"title\":\"Train and Deploy BLOOM with Amazon SageMaker and PEFT\"},\"slug\":\"bloom-sagemaker-peft\"},{\"frontmatter\":{\"title\":\"Introducing IGEL an instruction-tuned German large Language Model\"},\"slug\":\"introducing-igel\"},{\"frontmatter\":{\"title\":\"Efficient Large Language Model training with LoRA and Hugging Face\"},\"slug\":\"fine-tune-flan-t5-peft\"},{\"frontmatter\":{\"title\":\"Deploy FLAN-UL2 20B on Amazon SageMaker\"},\"slug\":\"deploy-flan-ul2-sagemaker\"},{\"frontmatter\":{\"title\":\"Getting started with Pytorch 2.0 and Hugging Face Transformers\"},\"slug\":\"getting-started-pytorch-2-0-transformers\"},{\"frontmatter\":{\"title\":\"Controlled text-to-image generation with ControlNet on Inference Endpoints\"},\"slug\":\"stable-diffusion-controlnet-endpoint\"},{\"frontmatter\":{\"title\":\"Combine Amazon SageMaker and DeepSpeed to fine-tune FLAN-T5 XXL\"},\"slug\":\"sagemaker-deepspeed\"},{\"frontmatter\":{\"title\":\"Fine-tune FLAN-T5 XL/XXL using DeepSpeed \u0026 Hugging Face Transformers\"},\"slug\":\"fine-tune-flan-t5-deepspeed\"},{\"frontmatter\":{\"title\":\"Deploy FLAN-T5 XXL on Amazon SageMaker\"},\"slug\":\"deploy-flan-t5-sagemaker\"},{\"frontmatter\":{\"title\":\"Hugging Face Transformers Examples\"},\"slug\":\"huggingface-transformers-examples\"},{\"frontmatter\":{\"title\":\"Getting started with Transformers and TPU using PyTorch\"},\"slug\":\"getting-started-tpu-transformers\"},{\"frontmatter\":{\"title\":\"Fine-tune FLAN-T5 for chat \u0026 dialogue summarization\"},\"slug\":\"fine-tune-flan-t5\"},{\"frontmatter\":{\"title\":\"Managed Transcription with OpenAI Whisper and Hugging Face Inference Endpoints\"},\"slug\":\"whisper-inference-endpoints\"},{\"frontmatter\":{\"title\":\"Stable Diffusion Inpainting example with Hugging Face inference Endpoints\"},\"slug\":\"stable-diffusion-inpainting-inference-endpoints\"},{\"frontmatter\":{\"title\":\"Stable Diffusion with Hugging Face Inference Endpoints\"},\"slug\":\"stable-diffusion-inference-endpoints\"},{\"frontmatter\":{\"title\":\"Document AI: LiLT a better language agnostic LayoutLM model\"},\"slug\":\"fine-tuning-lilt\"},{\"frontmatter\":{\"title\":\"Multi-Model GPU Inference with Hugging Face Inference Endpoints\"},\"slug\":\"multi-model-inference-endpoints\"},{\"frontmatter\":{\"title\":\"Serverless Machine Learning Applications with Hugging Face Gradio and AWS Lambda\"},\"slug\":\"serverless-gradio\"},{\"frontmatter\":{\"title\":\"Accelerate Stable Diffusion inference with DeepSpeed-Inference on GPUs\"},\"slug\":\"stable-diffusion-deepspeed-inference\"},{\"frontmatter\":{\"title\":\"Stable Diffusion on Amazon SageMaker\"},\"slug\":\"sagemaker-stable-diffusion\"},{\"frontmatter\":{\"title\":\"Deploy T5 11B for inference for less than $500\"},\"slug\":\"deploy-t5-11b\"},{\"frontmatter\":{\"title\":\"Outperform OpenAI GPT-3 with SetFit for text-classification\"},\"slug\":\"getting-started-setfit\"},{\"frontmatter\":{\"title\":\"Fine-tuning LayoutLM for document-understanding using Keras \u0026 Hugging Face Transformers \"},\"slug\":\"fine-tuning-layoutlm-keras\"},{\"frontmatter\":{\"title\":\"Deploy LayoutLM with Hugging Face Inference Endpoints\"},\"slug\":\"inference-endpoints-layoutlm\"},{\"frontmatter\":{\"title\":\"Document AI: Fine-tuning LayoutLM for document-understanding using Hugging Face Transformers \"},\"slug\":\"fine-tuning-layoutlm\"},{\"frontmatter\":{\"title\":\"Custom Inference with Hugging Face Inference Endpoints\"},\"slug\":\"custom-inference-handler\"},{\"frontmatter\":{\"title\":\"Accelerate GPT-J inference with DeepSpeed-Inference on GPUs\"},\"slug\":\"gptj-deepspeed-inference\"},{\"frontmatter\":{\"title\":\"Document AI: Fine-tuning Donut for document-parsing using Hugging Face Transformers\"},\"slug\":\"fine-tuning-donut\"},{\"frontmatter\":{\"title\":\"Use Sentence Transformers with TensorFlow\"},\"slug\":\"tensorflow-sentence-transformers\"},{\"frontmatter\":{\"title\":\"Pre-Training BERT with Hugging Face Transformers and Habana Gaudi\"},\"slug\":\"pre-training-bert-habana\"},{\"frontmatter\":{\"title\":\"Accelerate BERT inference with DeepSpeed-Inference on GPUs\"},\"slug\":\"bert-deepspeed-inference\"},{\"frontmatter\":{\"title\":\"Accelerate Sentence Transformers with Hugging Face Optimum\"},\"slug\":\"optimize-sentence-transformers\"},{\"frontmatter\":{\"title\":\"Deep Learning setup made easy with EC2 Remote Runner and Habana Gaudi\"},\"slug\":\"habana-gaudi-ec2-runner\"},{\"frontmatter\":{\"title\":\"Accelerate Vision Transformer (ViT) with Quantization using Optimum\"},\"slug\":\"optimizing-vision-transformer\"},{\"frontmatter\":{\"title\":\"Optimizing Transformers for GPUs with Optimum\"},\"slug\":\"optimizing-transformers-with-optimum-gpu\"},{\"frontmatter\":{\"title\":\"Hugging Face Transformers and Habana Gaudi AWS DL1 Instances\"},\"slug\":\"habana-distributed-training\"},{\"frontmatter\":{\"title\":\"Optimizing Transformers with Hugging Face Optimum\"},\"slug\":\"optimizing-transformers-with-optimum\"},{\"frontmatter\":{\"title\":\"Convert Transformers to ONNX with Hugging Face Optimum\"},\"slug\":\"convert-transformers-to-onnx\"},{\"frontmatter\":{\"title\":\"Setup Deep Learning environment for Hugging Face Transformers with Habana Gaudi on AWS\"},\"slug\":\"getting-started-habana-gaudi\"},{\"frontmatter\":{\"title\":\"Static Quantization with Hugging Face `optimum` for ~3x latency improvements\"},\"slug\":\"static-quantization-optimum\"},{\"frontmatter\":{\"title\":\"Advanced PII detection and anonymization with Hugging Face Transformers and Amazon SageMaker\"},\"slug\":\"pii-huggingface-sagemaker\"},{\"frontmatter\":{\"title\":\"An Amazon SageMaker Inference comparison with Hugging Face Transformers\"},\"slug\":\"sagemaker-inference-comparison\"},{\"frontmatter\":{\"title\":\"Semantic Segmantion with Hugging Face's Transformers \u0026 Amazon SageMaker\"},\"slug\":\"image-segmentation-sagemaker\"},{\"frontmatter\":{\"title\":\"Automatic Speech Recogntion with Hugging Face's Transformers \u0026 Amazon SageMaker\"},\"slug\":\"automatic-speech-recognition-sagemaker\"},{\"frontmatter\":{\"title\":\"Serverless Inference with Hugging Face's Transformers, DistilBERT and Amazon SageMaker\"},\"slug\":\"sagemaker-serverless-huggingface-distilbert\"},{\"frontmatter\":{\"title\":\"Accelerated document embeddings with Hugging Face Transformers and AWS Inferentia\"},\"slug\":\"huggingface-sentence-transformers-aws-inferentia\"},{\"frontmatter\":{\"title\":\"Save up to 90% training cost with AWS Spot Instances and Hugging Face Transformers\"},\"slug\":\"sagemaker-spot-instance\"},{\"frontmatter\":{\"title\":\"Speed up BERT inference with Hugging Face Transformers and AWS Inferentia\"},\"slug\":\"huggingface-bert-aws-inferentia\"},{\"frontmatter\":{\"title\":\"Creating document embeddings with Hugging Face's Transformers \u0026 Amazon SageMaker\"},\"slug\":\"custom-inference-huggingface-sagemaker\"},{\"frontmatter\":{\"title\":\"Autoscaling BERT with Hugging Face Transformers, Amazon SageMaker and Terraform module\"},\"slug\":\"terraform-huggingface-amazon-sagemaker-advanced\"},{\"frontmatter\":{\"title\":\"Multi-Container Endpoints with Hugging Face Transformers and Amazon SageMaker\"},\"slug\":\"sagemaker-huggingface-multi-container-endpoint\"},{\"frontmatter\":{\"title\":\"Asynchronous Inference with Hugging Face Transformers and Amazon SageMaker\"},\"slug\":\"sagemaker-huggingface-async-inference\"},{\"frontmatter\":{\"title\":\"Deploy BERT with Hugging Face Transformers, Amazon SageMaker and Terraform module\"},\"slug\":\"terraform-huggingface-amazon-sagemaker\"},{\"frontmatter\":{\"title\":\"Task-specific knowledge distillation for BERT using Transformers \u0026 Amazon SageMaker\"},\"slug\":\"knowledge-distillation-bert-transformers\"},{\"frontmatter\":{\"title\":\"Distributed training on multilingual BERT with Hugging Face Transformers \u0026 Amazon SageMaker\"},\"slug\":\"pytorch-distributed-training-transformers\"},{\"frontmatter\":{\"title\":\"Financial Text Summarization with Hugging Face Transformers, Keras \u0026 Amazon SageMaker\"},\"slug\":\"financial-summarizatio-huggingface-keras\"},{\"frontmatter\":{\"title\":\"Deploy GPT-J 6B for inference using  Hugging Face Transformers and Amazon SageMaker\"},\"slug\":\"deploy-gptj-sagemaker\"},{\"frontmatter\":{\"title\":\"Image Classification with Hugging Face Transformers and `Keras` \"},\"slug\":\"image-classification-huggingface-transformers-keras\"},{\"frontmatter\":{\"title\":\"Workshop: Enterprise-Scale NLP with Hugging Face \u0026 Amazon SageMaker\"},\"slug\":\"hugginface-sagemaker-workshop\"},{\"frontmatter\":{\"title\":\"Hugging Face Transformers with Keras: Fine-tune a non-English BERT for Named Entity Recognition\"},\"slug\":\"huggingface-transformers-keras-tf\"},{\"frontmatter\":{\"title\":\"New Serverless Transformers using Amazon SageMaker Serverless Inference and Hugging Face\"},\"slug\":\"serverless-transformers-sagemaker-huggingface\"},{\"frontmatter\":{\"title\":\"Hugging Face Transformers BERT fine-tuning using Amazon SageMaker and Training Compiler\"},\"slug\":\"huggingface-amazon-sagemaker-training-compiler\"},{\"frontmatter\":{\"title\":\"MLOps: Using the Hugging Face Hub as model registry with Amazon SageMaker\"},\"slug\":\"huggingface-hub-amazon-sagemaker\"},{\"frontmatter\":{\"title\":\"A remote guide to re:Invent 2021 machine learning sessions\"},\"slug\":\"re-invent-2021\"},{\"frontmatter\":{\"title\":\"MLOps: End-to-End Hugging Face Transformers with the Hub \u0026 SageMaker Pipelines\"},\"slug\":\"mlops-sagemaker-huggingface-transformers\"},{\"frontmatter\":{\"title\":\"Going Production: Auto-scaling Hugging Face Transformers with Amazon SageMaker\"},\"slug\":\"auto-scaling-sagemaker-huggingface\"},{\"frontmatter\":{\"title\":\"Deploy BigScience T0_3B to AWS \u0026 Amazon SageMaker\"},\"slug\":\"deploy-bigscience-t0-3b-to-aws-and-amazon-sagemaker\"},{\"frontmatter\":{\"title\":\"Scalable, Secure Hugging Face Transformer Endpoints with Amazon SageMaker, AWS Lambda, and CDK\"},\"slug\":\"huggingface-transformers-cdk-sagemaker-lambda\"},{\"frontmatter\":{\"title\":\"Few-shot learning in practice with GPT-Neo\"},\"slug\":\"few-shot-learning-gpt-neo\"},{\"frontmatter\":{\"title\":\"Distributed Training: Train BART/T5 for Summarization using 🤗 Transformers and Amazon SageMaker\"},\"slug\":\"sagemaker-distributed-training\"},{\"frontmatter\":{\"title\":\"Multilingual Serverless XLM RoBERTa with HuggingFace, AWS Lambda\"},\"slug\":\"multilingual-serverless-xlm-roberta-with-huggingface\"},{\"frontmatter\":{\"title\":\"Serverless BERT with HuggingFace, AWS Lambda, and Docker\"},\"slug\":\"serverless-bert-with-huggingface-aws-lambda-docker\"},{\"frontmatter\":{\"title\":\"AWS Lambda with custom docker images as runtime\"},\"slug\":\"aws-lambda-with-custom-docker-image\"},{\"frontmatter\":{\"title\":\"New Serverless BERT with Huggingface, AWS Lambda, and AWS EFS\"},\"slug\":\"new-serverless-bert-with-huggingface-aws-lambda\"},{\"frontmatter\":{\"title\":\"efsync my first open-source MLOps toolkit\"},\"slug\":\"efsync-my-first-open-source-mlops-toolkit\"},{\"frontmatter\":{\"title\":\"My path to become a certified solution architect\"},\"slug\":\"my-path-to-become-a-certified-solution-architect\"},{\"frontmatter\":{\"title\":\"Create custom Github Action in 4 steps\"},\"slug\":\"create-custom-github-action-in-4-steps\"},{\"frontmatter\":{\"title\":\"Fine-tune a non-English GPT-2 Model with Huggingface\"},\"slug\":\"fine-tune-a-non-english-gpt-2-model-with-huggingface\"},{\"frontmatter\":{\"title\":\"Mount your AWS EFS volume into AWS Lambda with the Serverless Framework\"},\"slug\":\"mount-your-aws-efs-volume-into-aws-lambda-with-the-serverless-framework\"},{\"frontmatter\":{\"title\":\"Serverless BERT with HuggingFace and AWS Lambda\"},\"slug\":\"serverless-bert-with-huggingface-and-aws-lambda\"},{\"frontmatter\":{\"title\":\"How to use Google Tag Manager and Google Analytics without Cookies\"},\"slug\":\"how-to-use-google-tag-manager-and-google-analytics-without-cookies\"},{\"frontmatter\":{\"title\":\"BERT Text Classification in a different language\"},\"slug\":\"bert-text-classification-in-a-different-language\"},{\"frontmatter\":{\"title\":\"Scaling Machine Learning from ZERO to HERO\"},\"slug\":\"scaling-machine-learning-from-zero-to-hero\"},{\"frontmatter\":{\"title\":\"Getting Started with AutoML and AWS AutoGluon\"},\"slug\":\"getting-started-with-automl-and-aws-autogluon\"},{\"frontmatter\":{\"title\":\"K-Fold as Cross-Validation with a BERT Text-Classification Example\"},\"slug\":\"k-fold-as-cross-validation-with-a-bert-text-classification-example\"},{\"frontmatter\":{\"title\":\"How to Set Up a CI/CD Pipeline for AWS Lambda With GitHub Actions and Serverless\"},\"slug\":\"how-to-set-up-a-ci-cd-pipeline-for-aws-lambda-with-github-actions-and-serverless\"},{\"frontmatter\":{\"title\":\"Set up a CI/CD Pipeline for your Web app on AWS with Github Actions\"},\"slug\":\"set-up-a-ci-cd-pipeline-for-your-web-app-on-aws-s3-with-github-actions\"},{\"frontmatter\":{\"title\":\"Getting started with CNNs by calculating LeNet-Layer manually\"},\"slug\":\"getting-started-with-cnn-by-calculating-lenet-layer-manually\"},{\"frontmatter\":{\"title\":\"Google Colab the free GPU/TPU Jupyter Notebook Service\"},\"slug\":\"google-cola-the-free-gpu-jupyter\"}]}],[\"$\",\"$L1a\",null,{}]]}]}]\n"])</script><script>self.__next_f.push([1,"12:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"white\"}],[\"$\",\"meta\",\"2\",{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"black\"}],[\"$\",\"meta\",\"3\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"4\",{\"children\":\"Practical Guide on how to build an Agent from scratch with Gemini 3\"}],[\"$\",\"meta\",\"5\",{\"name\":\"description\",\"content\":\"A step-by-step practical guide on building AI agents using Gemini 3 Pro, covering tool integration, context management, and best practices for creating effective and reliable agents.\"}],[\"$\",\"meta\",\"6\",{\"name\":\"author\",\"content\":\"Philipp Schmid\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:title\",\"content\":\"Practical Guide on how to build an Agent from scratch with Gemini 3\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:description\",\"content\":\"A step-by-step practical guide on building AI agents using Gemini 3 Pro, covering tool integration, context management, and best practices for creating effective and reliable agents.\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:url\",\"content\":\"https://www.philschmid.de/building-agents\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:image\",\"content\":\"https://www.philschmid.de/static/blog/building-agents/thumbnail.jpg\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:image:alt\",\"content\":\"Practical Guide on how to build an Agent from scratch with Gemini 3\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"15\",{\"property\":\"article:published_time\",\"content\":\"2025-11-21\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:title\",\"content\":\"Practical Guide on how to build an Agent from scratch with Gemini 3\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:description\",\"content\":\"A step-by-step practical guide on building AI agents using Gemini 3 Pro, covering tool integration, context management, and best practices for creating effective and reliable agents.\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:image\",\"content\":\"https://www.philschmid.de/static/blog/building-agents/thumbnail.jpg\"}],[\"$\",\"link\",\"20\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"256x256\"}],[\"$\",\"meta\",\"21\",{\"name\":\"next-size-adjust\"}]]\n"])</script><script>self.__next_f.push([1,"7:null\n"])</script><script>self.__next_f.push([1,"1b:I[9759,[\"258\",\"static/chunks/258-d3b685a6269d0b54.js\",\"749\",\"static/chunks/749-959f21c401b0dc65.js\",\"341\",\"static/chunks/341-80f30eef2fdea67d.js\",\"42\",\"static/chunks/app/%5Bslug%5D/page-d5f06a52675594cd.js\"],\"Pre\"]\n"])</script><script>self.__next_f.push([1,"16:[[\"$\",\"p\",null,{\"children\":\"It seems complicated, when you watch an AI agent edit multiple files, run commands, handle errors, and iteratively solve a problem, it feels like magic. But it isn’t. The secret to building an agent is that there is no secret.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The core of an Agent is surprisingly simple: It is a Large Language Model (LLM) running in a loop, equipped with tools it can choose to use.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"If you can write a loop in Python, you can build an agent. This guide will walk you through the process, from a simple API call to a functioning CLI Agent.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"what-actually-is-an-agent\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#what-actually-is-an-agent\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"What actually is an Agent?\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Traditional software workflows are prescriptive and follow predefined paths (\",[\"$\",\"code\",null,{\"children\":\"Step A -\u003e Step B -\u003e Step C\"}],\"), \",[\"$\",\"strong\",null,{\"children\":\"Agents\"}],\" are System that uses an LLM to dynamically decide the control flow of an application to achieve a user goal.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"An agent generally consists of these core components:\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"The Model (Brain):\"}],\" The reasoning engine, in our case a Gemini model. It reasons through ambiguity, plans steps, and decides when it needs outside help.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Tools (Hands and Eyes):\"}],\" Functions the agent can execute to interact with the outside world/environment (e.g., searching the web, reading a file, calling an API).\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Context/Memory (Workspace):\"}],\" The information the agent has access to at any moment. Managing this effectively, known as \",[\"$\",\"strong\",null,{\"children\":\"Context Engineering\"}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"The Loop (Life):\"}],\" A \",[\"$\",\"code\",null,{\"children\":\"while\"}],\" loop that allows the model to: Observe → Think → Act → Observe again, until the task is complete.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/static/blog/building-agents/agent.png\",\"alt\":\"agent\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"\\\"The Loop\\\"\"}],\" of nearly every agent is an iterative process:\"]}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Define Tool Definitions:\"}],\" You describe your available tools (e.g., \",[\"$\",\"code\",null,{\"children\":\"get_weather\"}],\") to the model using a structured JSON format.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Call the LLM:\"}],\" You send the user's prompt \",[\"$\",\"em\",null,{\"children\":\"and\"}],\" the tool definitions to the model.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Model Decision:\"}],\" The model analyzes the request. If a tool is needed, it returns a structured \",[\"$\",\"code\",null,{\"children\":\"tool use\"}],\" containing the tool name and arguments.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Execute Tool (Client Responsibility):\"}],\" The client/application code intercepts this \",[\"$\",\"code\",null,{\"children\":\"tool use\"}],\", executes the actual code or API call, and captures the result.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Respond and Iterate:\"}],\" You send the result (the \",[\"$\",\"code\",null,{\"children\":\"tool response\"}],\") back to model. The model uses this new information to decide the next step, either calling another tool or generating the final response.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"building-an-agent\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#building-an-agent\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Building an Agent\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Let's build an agent step-by-step, progressing from basic text generation to a functional CLI agent using Gemini 3 Pro and Python SDK.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":[\"Prerequisites: Install the SDK (\",[\"$\",\"code\",null,{\"children\":\"pip install google-genai\"}],\") and set your \",[\"$\",\"code\",null,{\"children\":\"GEMINI_API_KEY\"}],\" environment variable (\",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://aistudio.google.com/app/apikey\",\"children\":\"Get it in AI Studio\"}],\").\"]}]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"step-1-basic-text-generation-and-abstraction\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#step-1-basic-text-generation-and-abstraction\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Step 1: Basic Text Generation and Abstraction\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The first step is to create a baseline interaction with the LLM, for us Gemini 3 Pro. We are going to create a simple Agent class abstraction to structure our code, which we will extend throughout this guide. We will first start with a simple chatbot that maintains a conversation history.\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"$L1b\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" google \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" genai\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" google.genai \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" types\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" Agent\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" __init__\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(self, model: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".model \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" model\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".client \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" genai.Client()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" run\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(self, contents: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents.append({\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"role\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"parts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": [{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"text\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": contents}]})\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        response \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".client.models.generate_content(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"model\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".model, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"contents\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents.append(response.candidates[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"].content)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" response\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"agent \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" Agent(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"model\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"gemini-3-pro-preview\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"response1 \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" agent.run(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    contents\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Hello, What are top 3 cities in Germany to visit? Only return the names of the cities.\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"print\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Model: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"response1.text\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"# Output: Berlin, Munich, Cologne \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"response2 \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" agent.run(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    contents\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Tell me something about the second city.\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"print\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Model: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"response2.text\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"# Output: Munich is the capital of Bavaria and is known for its Oktoberfest.\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"This is \",[\"$\",\"em\",null,{\"children\":\"not\"}],\" an agent yet. It is a standard chatbot. It maintains state but cannot take action, has no \\\"hands or eyes\\\".\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"step-2-giving-it-hands--eyes-tool-use\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#step-2-giving-it-hands--eyes-tool-use\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Step 2: Giving it Hands \u0026 Eyes (Tool Use)\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"To start turning this an agent, we need \",[\"$\",\"strong\",null,{\"children\":\"Tool Use\"}],\" or Function Calling. We provide the agent with tools. This requires defining the implementation (the Python code) and the definition (the schema the LLM sees). If the LLM believes that tool will help solve a user's prompt, it will return a structured request to call that function instead of just text.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We are going to create 3 tools, \",[\"$\",\"code\",null,{\"children\":\"read_file\"}],\", \",[\"$\",\"code\",null,{\"children\":\"write_file\"}],\", and \",[\"$\",\"code\",null,{\"children\":\"list_dir\"}],\". A tool Definition is a JSON schema that defines the \",[\"$\",\"code\",null,{\"children\":\"name\"}],\", \",[\"$\",\"code\",null,{\"children\":\"description\"}],\", and \",[\"$\",\"code\",null,{\"children\":\"parameters\"}],\" of the tool.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Best Practice\"}],\": Use the \",[\"$\",\"code\",null,{\"children\":\"description\"}],\" fields to explain when and how to use the tool. The model relies heavily on these to understand when and how to use the tool. Be explicit and clear.\"]}]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"$L1b\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" os\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" json\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"read_file_definition \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"name\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"read_file\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"description\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Reads a file and returns its contents.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"parameters\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"object\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"properties\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"            \\\"file_path\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"                \\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"string\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"                \\\"description\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Path to the file to read.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"            }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"required\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"file_path\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"list_dir_definition \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"name\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"list_dir\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"description\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Lists the contents of a directory.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"parameters\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"object\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"properties\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"            \\\"directory_path\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"                \\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"string\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"                \\\"description\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Path to the directory to list.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"            }\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"required\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"directory_path\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"write_file_definition \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"name\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"write_file\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"description\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Writes a file with the given contents.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"parameters\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"object\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"properties\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"            \\\"file_path\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"                \\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"string\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"                \\\"description\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Path to the file to write.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"            },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"            \\\"contents\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"                \\\"type\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"string\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"                \\\"description\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Contents to write to the file.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"            },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"        \\\"required\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"file_path\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"contents\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" read_file\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(file_path: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    with\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" open\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(file_path, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"r\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"as\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" f:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" f.read()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" write_file\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(file_path: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", contents: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") -\u003e \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"bool\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"\\\"\\\"Writes a file with the given contents.\\\"\\\"\\\"\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    with\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" open\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(file_path, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"w\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"as\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" f:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        f.write(contents)\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" True\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" list_dir\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(directory_path: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\") -\u003e list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"\\\"\\\"Lists the contents of a directory.\\\"\\\"\\\"\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    full_path \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" os.path.expanduser(directory_path)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" os.listdir(full_path)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"file_tools \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"read_file\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"definition\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": read_file_definition, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": read_file},\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"write_file\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"definition\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": write_file_definition, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": write_file},\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"    \\\"list_dir\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"definition\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": list_dir_definition, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": list_dir},\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Now we integrate the \",[\"$\",\"code\",null,{\"children\":\"tools\"}],\" and function calls into our Agent class along side a System Instruction. System\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"$L1b\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" google \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" genai\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" google.genai \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" types\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" Agent\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" __init__\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(self, model: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",tools: list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".model \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" model\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".client \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" genai.Client()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".tools \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" tools\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" run\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(self, contents: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents.append({\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"role\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"parts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": [{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"text\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": contents}]})\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        config \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" types.GenerateContentConfig(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"            tools\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"[types.Tool(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"function_declarations\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"[tool[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"definition\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" tool \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".tools.values()])],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        )\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        response \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".client.models.generate_content(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"model\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".model, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"contents\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"config\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"config)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents.append(response.candidates[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"].content)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" response\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"agent \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" Agent(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"model\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"gemini-3-pro-preview\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"tools\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"file_tools)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"response \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" agent.run(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    contents\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Can you list my files in the current directory?\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"print\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(response.function_calls)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"# Output: [FunctionCall(name='list_dir', arguments={'directory_path': '.'})]\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Great! The model has successfully called the tool. Now, we need to add the tool execution logic to our Agent class and the loop return the result back to the model.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"step-3-closing-the-loop-the-agent\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#step-3-closing-the-loop-the-agent\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Step 3: Closing the Loop (The Agent)\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"An Agent isn't about generating one tool call, but about generating a series of tool calls, returning the results back to the model, and then generating another tool call, and so on until the task is completed.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"Agent\"}],\" class handles the core loop: intercepting the \",[\"$\",\"code\",null,{\"children\":\"FunctionCall\"}],\", executing the tool on the client side, and sending back the \",[\"$\",\"code\",null,{\"children\":\"FunctionResponse\"}],\". We also add a \",[\"$\",\"code\",null,{\"children\":\"SystemInstruction\"}],\" to the model to guide the model on what to do.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":[\"Note: Gemini 3 uses \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://ai.google.dev/gemini-api/docs/gemini-3?thinking=high#thought_signatures\",\"children\":\"Thought signatures\"}],\" to maintain reasoning context across API calls. You must return these signatures back to the model in your request exactly as they were received.\"]}]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"$L1b\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"# ... Code for the tools and tool definitions from Step 2 should be here ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" google \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" genai\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" google.genai \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" types\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"class\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" Agent\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" __init__\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(self, model: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\",tools: list[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"dict\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"], system_instruction: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\" \\\"You are a helpful assistant.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".model \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" model\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".client \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" genai.Client()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".tools \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" tools\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".system_instruction \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" system_instruction\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    def\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#B392F0\",\"--shiki-light\":\"#6F42C1\"},\"children\":\" run\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(self, contents: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\" |\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" list[dict[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"str\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]]):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" isinstance\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(contents, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"list\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"            self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents.append({\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"role\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"parts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": contents})\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        else\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"            self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents.append({\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"role\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"parts\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": [{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"text\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": contents}]})\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        config \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" types.GenerateContentConfig(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"            system_instruction\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".system_instruction,\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"            tools\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"[types.Tool(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"function_declarations\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"[tool[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"definition\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" tool \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".tools.values()])],\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        )\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        response \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".client.models.generate_content(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"model\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".model, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"contents\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"config\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"config)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"        self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".contents.append(response.candidates[\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"].content)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" response.function_calls:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"            functions_response_parts \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" []\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"            for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" tool_call \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" response.function_calls:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"                print\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"[Function Call] \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"tool_call\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"                if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" tool_call.name \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".tools:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"                    result \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"result\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".tools[tool_call.name][\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"function\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"](\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"**\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"tool_call.args)}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"                else\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"                    result \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"error\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Tool not found\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"}\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"                print\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"[Function Response] \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"result\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"                functions_response_parts.append({\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"functionResponse\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": {\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"name\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": tool_call.name, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"response\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\": result}})\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"            return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" self\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\".run(functions_response_parts)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"        \"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" response\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"agent \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" Agent(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    model\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"gemini-3-pro-preview\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    tools\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"file_tools, \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    system_instruction\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"You are a helpful Coding Assistant. Respond like you are Linus Torvalds.\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"response \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" agent.run(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    contents\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Can you list my files in the current directory?\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"print\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(response.text)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"# Output: [Function Call] id=None args={'directory_path': '.'} name='list_dir'\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"# [Function Response] {'result': ['.venv', ... ]}\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"# There. Your current directory contains: `LICENSE`,\"}]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Congratulations. You just built your first functioning agent.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"phase-4-multi-turn-cli-agent\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#phase-4-multi-turn-cli-agent\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Phase 4: Multi-turn CLI Agent\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Now we can run our agent in a simple CLI loop. It takes surprisingly little code to create highly capable behavior.\"}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"$L1b\",null,{\"style\":{\"--shiki-dark\":\"#e1e4e8\",\"--shiki-light\":\"#24292e\",\"--shiki-dark-bg\":\"#24292e\",\"--shiki-light-bg\":\"#fff\"},\"tabIndex\":\"0\",\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"python\",\"data-theme\":\"github-dark github-light\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#6A737D\",\"--shiki-light\":\"#6A737D\"},\"children\":\"# ... Code for the Agent, tools and tool definitions from Step 3 should be here ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"agent \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" Agent(\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    model\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"gemini-3-pro-preview\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    tools\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"file_tools, \"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#FFAB70\",\"--shiki-light\":\"#E36209\"},\"children\":\"    system_instruction\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"You are a helpful Coding Assistant. Respond like you are Linus Torvalds.\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"print\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Agent ready. Ask it to check files in this directory.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"while\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" True\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\":\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    user_input \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\" input\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"You: \\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" user_input.lower() \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'exit'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"'quit'\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"]:\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"        break\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"    response \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\" agent.run(user_input)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"    print\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#F97583\",\"--shiki-light\":\"#D73A49\"},\"children\":\"f\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"Linus: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"{\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\"response.text\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#79B8FF\",\"--shiki-light\":\"#005CC5\"},\"children\":\"}\\\\n\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#9ECBFF\",\"--shiki-light\":\"#032F62\"},\"children\":\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-dark\":\"#E1E4E8\",\"--shiki-light\":\"#24292E\"},\"children\":\")\"}]]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"best-practices-for-engineering-agents\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#best-practices-for-engineering-agents\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Best Practices for Engineering Agents\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Building the loop is easy; making it reliable, transparent, and controllable is hard. Here are key engineering principles derived from top industry practices, grouped by functional area.\"}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"1-tool-definition--ergonomics\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#1-tool-definition--ergonomics\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"1. Tool Definition \u0026 Ergonomics\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Your tools are the interface for the model. Don't just wrap your existing internal APIs. If a tool is confusing to a human, it's confusing to the model:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Clear Naming:\"}],\" Use obvious names like \",[\"$\",\"code\",null,{\"children\":\"search_customer_database\"}],\" rather than \",[\"$\",\"code\",null,{\"children\":\"cust_db_v2_query\"}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Precise Descriptions:\"}],\" Gemini reads the function docstrings to understand \",[\"$\",\"em\",null,{\"children\":\"when\"}],\" and \",[\"$\",\"em\",null,{\"children\":\"how\"}],\" to use a tool. Spend time writing these carefully, it is essentially \\\"prompt engineering\\\" for tools.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Return Meaningful Errors:\"}],\" Don't return a 50-line Java stack trace. If a tool fails, return a clear string like \",[\"$\",\"code\",null,{\"children\":\"Error: File not found. Did you mean 'data.csv'?\"}],\". This allows the agent to self-correct.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Tolerate Fuzzy Inputs:\"}],\" If a model frequently guesses file paths wrong, update your tool to handle relative paths or fuzzy inputs rather than just erroring out.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"2-context-engineering\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#2-context-engineering\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"2. Context Engineering\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Models have a finite \\\"attention budget.\\\" Managing what information enters the context is crucial for performance and cost.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Don't \\\"Dump\\\" Data:\"}],\" Don't have a tool that returns an entire 10MB database table. Instead of \",[\"$\",\"code\",null,{\"children\":\"get_all_users()\"}],\", create \",[\"$\",\"code\",null,{\"children\":\"search_users(query: str)\"}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Just-in-time Loading:\"}],\" Instead of pre-loading all data (traditional RAG), use just-in-time strategies. The agent should maintain lightweight identifiers (file paths, IDs) and use tools to dynamically load content only when needed.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Compression:\"}],\" For very long-running agents, summarize the history, remove old context or start a new sessions.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Agentic Memory:\"}],\" Allow the agent to maintain notes or a scratchpad persisted \",[\"$\",\"em\",null,{\"children\":\"outside\"}],\" the context window, pulling them back in only when relevant.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"id\":\"3-dont-over-engineer\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#3-dont-over-engineer\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"3. Don't over engineer\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"It's tempting to build complex multi-agent systems. Don't.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Maximize a Single Agent First:\"}],\" Don't immediately build complex multi-agent systems. Gemini is highly capable of handling dozens of tools in a single prompt.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Escape Hatches:\"}],\" Ensure loops can be stopped like a \",[\"$\",\"code\",null,{\"children\":\"max_iterations\"}],\" break (e.g., 15 turns).\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Guardrails and System Instructions:\"}],\" Use the \",[\"$\",\"code\",null,{\"children\":\"system_instruction\"}],\" to guide the model with hard rules (e.g., \\\"You are strictly forbidden from offering refunds greater than $50\\\") or use external classifier.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Human-in-the-loop:\"}],\" For sensitive actions (like \",[\"$\",\"code\",null,{\"children\":\"send_email\"}],\" or \",[\"$\",\"code\",null,{\"children\":\"execute_code\"}],\"), pause the loop and require user confirmation before the tool is actually executed.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Prioritize Transparency and Debugging:\"}],\" Log tool calls and parameters. Analyzing the model's reasoning helps identify if issues, and improve the agent over time.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"conclusion\",\"children\":[[\"$\",\"a\",null,{\"href\":\"#conclusion\",\"aria-hidden\":\"true\",\"tabIndex\":\"-1\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Conclusion\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Building an agent is no longer magic; it is a practical engineering task. As we've shown, you can build a working prototype in under 100 lines of code. While understanding these fundamentals is key, don't get bogged down re-engineering the same pattern over and over. The AI community has created fantastic open-source libraries that can help you build more complex and robust agents faster.\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Thanks for reading! If you have any questions or feedback, please let me know on \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://twitter.com/_philschmid\",\"children\":\"Twitter\"}],\" or \",[\"$\",\"a\",null,{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.linkedin.com/in/philipp-schmid-a6a2bb196/\",\"children\":\"LinkedIn\"}],\".\"]}]]\n"])</script><script>self.__next_f.push([1,""])</script></body></html>